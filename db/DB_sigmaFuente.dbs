<?xml version="1.0" encoding="UTF-8" ?>
<project name="PostgreSQL" id="Project_3cef870" template="Default" database="PostgreSQL" >
	<schema name="sistema" catalogname="SIGMA_DB" schemaname="sistema" >
		<table name="calificacion" >
			<column name="id_calificacion" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="calificacion_cliente" type="float8" length="17" decimal="17" jt="6" />
			<column name="calificacion_coodinador" type="float8" length="17" decimal="17" jt="6" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="mes" type="varchar" length="300" decimal="0" jt="12" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="valor" type="float8" length="17" decimal="17" jt="6" />
			<column name="id_tecnico" type="integer" length="10" decimal="0" jt="4" />
			<index name="calificacion_pkey" unique="PRIMARY_KEY" >
				<column name="id_calificacion" />
			</index>
			<fk name="fkkgqxyn6hviatvvy2u6ahspqbk" to_schema="sistema" to_table="tecnico" >
				<fk_column name="id_tecnico" pk="id_tecnico" />
			</fk>
		</table>
		<table name="capacitacion_tecnico" >
			<column name="id_capacitacion_tecnico" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="curso_capacitacion" type="varchar" length="300" decimal="0" jt="12" />
			<column name="fecha_capacitacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="horas_capacitacion" type="varchar" length="300" decimal="0" jt="12" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_tecnico" type="integer" length="10" decimal="0" jt="4" />
			<index name="capacitacion_tecnico_pkey" unique="PRIMARY_KEY" >
				<column name="id_capacitacion_tecnico" />
			</index>
			<fk name="fk8jbg3nr68knen0h4yfi9jba3x" to_schema="sistema" to_table="tecnico" >
				<fk_column name="id_tecnico" pk="id_tecnico" />
			</fk>
		</table>
		<table name="cliente" >
			<column name="id_cliente" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="cliente" type="varchar" length="150" decimal="0" jt="12" />
			<column name="direccion" type="varchar" length="300" decimal="0" jt="12" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="representante" type="varchar" length="300" decimal="0" jt="12" />
			<column name="ubicacion" type="varchar" length="300" decimal="0" jt="12" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_tipo_cliente" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_zona" type="integer" length="10" decimal="0" jt="4" />
			<column name="cod_postal" type="varchar" length="5" decimal="0" jt="12" />
			<column name="ubigeo" type="varchar" length="6" decimal="0" jt="12" />
			<index name="cliente_pkey" unique="PRIMARY_KEY" >
				<column name="id_cliente" />
			</index>
			<fk name="fk46k6k25yfkq3bvr0qf6b8ub5h" to_schema="sistema" to_table="tipo_cliente" >
				<fk_column name="id_tipo_cliente" pk="id_tipo_cliente" />
			</fk>
		</table>
		<table name="complejidad_servicio" >
			<column name="id_complejidad_servicio" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="complejidad_servicio" type="varchar" length="300" decimal="0" jt="12" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<index name="complejidad_servicio_pkey" unique="PRIMARY_KEY" >
				<column name="id_complejidad_servicio" />
			</index>
		</table>
		<table name="encuesta_atencion_servicio" >
			<column name="id_encuesta_atencion_servicio" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="calificacion_servicio" type="varchar" length="300" decimal="0" jt="12" />
			<column name="calificacion_tecnico" type="varchar" length="300" decimal="0" jt="12" />
			<column name="conclusiones" type="varchar" length="300" decimal="0" jt="12" />
			<column name="descripcion" type="varchar" length="300" decimal="0" jt="12" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_encuesta_servico" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="id_tecnico" type="integer" length="10" decimal="0" jt="4" />
			<column name="observaciones" type="varchar" length="300" decimal="0" jt="12" />
			<column name="recomendaciones" type="varchar" length="300" decimal="0" jt="12" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="visita" type="integer" length="10" decimal="0" jt="4" />
			<index name="encuesta_atencion_servicio_pkey" unique="PRIMARY_KEY" >
				<column name="id_encuesta_atencion_servicio" />
			</index>
			<fk name="fkqfegmc18rw7i9e6br26v6j37w" to_schema="sistema" to_table="visita" >
				<fk_column name="visita" pk="id_visita" />
			</fk>
		</table>
		<table name="estado" >
			<column name="id_estado" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="estado" type="varchar" length="300" decimal="0" jt="12" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="flag_orden" type="bool" length="1" decimal="0" jt="-7" />
			<column name="flag_solicitud" type="bool" length="1" decimal="0" jt="-7" />
			<column name="flag_visita" type="bool" length="1" decimal="0" jt="-7" />
			<index name="estado_pkey" unique="PRIMARY_KEY" >
				<column name="id_estado" />
			</index>
		</table>
		<table name="estado_orden" >
			<column name="id_estado_orden" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="estado_orden" type="varchar" length="300" decimal="0" jt="12" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_estado" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_orden_servicio" type="integer" length="10" decimal="0" jt="4" />
			<index name="estado_orden_pkey" unique="PRIMARY_KEY" >
				<column name="id_estado_orden" />
			</index>
			<fk name="fk4seapkosg6copjvo1b3kga85b" to_schema="sistema" to_table="estado" >
				<fk_column name="id_estado" pk="id_estado" />
			</fk>
			<fk name="fkd5fsvkcvu3q8cn5xs2mrhjp6d" to_schema="sistema" to_table="orden_servicio" >
				<fk_column name="id_orden_servicio" pk="id_orden_servicio" />
			</fk>
		</table>
		<table name="estado_programa_visita" >
			<column name="id_estado_programa_visita" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="estado_programa_visita" type="varchar" length="300" decimal="0" jt="12" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_estado" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_programa_visita" type="integer" length="10" decimal="0" jt="4" />
			<index name="estado_programa_visita_pkey" unique="PRIMARY_KEY" >
				<column name="id_estado_programa_visita" />
			</index>
			<fk name="fkc8mv53t4r9d1ykjxmboqswc5m" to_schema="sistema" to_table="estado" >
				<fk_column name="id_estado" pk="id_estado" />
			</fk>
			<fk name="fktpoyb7qa7e3torw9o70s2j032" to_schema="sistema" to_table="programa_visita" >
				<fk_column name="id_programa_visita" pk="id_programa_visita" />
			</fk>
		</table>
		<table name="estado_solicitud" >
			<column name="id_estado_solicitud" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="estado_solicitud" type="varchar" length="300" decimal="0" jt="12" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_estado" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_solicitud" type="integer" length="10" decimal="0" jt="4" />
			<index name="estado_solicitud_pkey" unique="PRIMARY_KEY" >
				<column name="id_estado_solicitud" />
			</index>
			<fk name="fk9lhc9mhw6bxwu2pd4r29f5b3o" to_schema="sistema" to_table="estado" >
				<fk_column name="id_estado" pk="id_estado" />
			</fk>
			<fk name="fkclncpd0pd2fnf0p3jf6saawet" to_schema="sistema" to_table="solicitud" >
				<fk_column name="id_solicitud" pk="id_solicitud" />
			</fk>
		</table>
		<table name="grafico" >
			<column name="id_grafico" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="cost" type="float8" length="17" decimal="17" jt="6" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_programada" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="id_tecnico" type="integer" length="10" decimal="0" jt="4" />
			<column name="nombre" type="varchar" length="300" decimal="0" jt="12" />
			<column name="recurso" type="varchar" length="300" decimal="0" jt="12" />
			<column name="source" type="integer" length="10" decimal="0" jt="4" />
			<column name="target" type="integer" length="10" decimal="0" jt="4" />
			<column name="ubicacion" type="varchar" length="300" decimal="0" jt="12" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<index name="grafico_pkey" unique="PRIMARY_KEY" >
				<column name="id_grafico" />
			</index>
		</table>
		<table name="graph" >
			<column name="id" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="cost" type="float8" length="17" decimal="17" jt="6" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="source" type="integer" length="10" decimal="0" jt="4" />
			<column name="target" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<index name="graph_pkey" unique="PRIMARY_KEY" >
				<column name="id" />
			</index>
		</table>
		<table name="hoja_ruta" >
			<column name="id_hoja_ruta" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="descripcion" type="varchar" length="300" decimal="0" jt="12" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_visita" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="latitud" type="float8" length="17" decimal="17" jt="6" />
			<column name="longitud" type="float8" length="17" decimal="17" jt="6" />
			<column name="orden" type="integer" length="10" decimal="0" jt="4" />
			<column name="orden_registro" type="integer" length="10" decimal="0" jt="4" />
			<column name="referencia_ruta" type="varchar" length="300" decimal="0" jt="12" />
			<column name="ubicacion" type="varchar" length="300" decimal="0" jt="12" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_orden_servicio" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_programa_visita" type="integer" length="10" decimal="0" jt="4" />
			<index name="hoja_ruta_pkey" unique="PRIMARY_KEY" >
				<column name="id_hoja_ruta" />
			</index>
			<fk name="fkr64imnb0p3gu2l7c0sipley5b" to_schema="sistema" to_table="orden_servicio" >
				<fk_column name="id_orden_servicio" pk="id_orden_servicio" />
			</fk>
			<fk name="fkr179ivdkdb3jr268cuw93p3e3" to_schema="sistema" to_table="programa_visita" >
				<fk_column name="id_programa_visita" pk="id_programa_visita" />
			</fk>
		</table>
		<table name="informe" >
			<column name="id_informe" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="actividades" type="varchar" length="300" decimal="0" jt="12" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="descripcion" type="varchar" length="300" decimal="0" jt="12" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_informe" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="incidencias" type="varchar" length="300" decimal="0" jt="12" />
			<column name="observaciones" type="varchar" length="300" decimal="0" jt="12" />
			<column name="otros" type="varchar" length="300" decimal="0" jt="12" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_visita" type="integer" length="10" decimal="0" jt="4" />
			<index name="informe_pkey" unique="PRIMARY_KEY" >
				<column name="id_informe" />
			</index>
			<fk name="fkdi427y7670q6apwhnd92kki0i" to_schema="sistema" to_table="visita" >
				<fk_column name="id_visita" pk="id_visita" />
			</fk>
		</table>
		<table name="orden_servicio" >
			<column name="id_orden_servicio" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_solicitud" type="integer" length="10" decimal="0" jt="4" />
			<column name="numero_orden" type="varchar" length="70" decimal="0" jt="12" />
			<index name="orden_servicio_pkey" unique="PRIMARY_KEY" >
				<column name="id_orden_servicio" />
			</index>
			<fk name="fkgq2b9o065jar36ma2xm5bh5n0" to_schema="sistema" to_table="solicitud" >
				<fk_column name="id_solicitud" pk="id_solicitud" />
			</fk>
		</table>
		<table name="orden_servicio_recurso" >
			<column name="id_orden_servicio_recurso" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="cantidad" type="integer" length="10" decimal="0" jt="4" />
			<column name="comentario" type="varchar" length="300" decimal="0" jt="12" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="observacion" type="varchar" length="300" decimal="0" jt="12" />
			<column name="unidad" type="varchar" length="300" decimal="0" jt="12" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_orden_servicio" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_recurso" type="integer" length="10" decimal="0" jt="4" />
			<index name="orden_servicio_recurso_pkey" unique="PRIMARY_KEY" >
				<column name="id_orden_servicio_recurso" />
			</index>
			<fk name="fkqpkoyuiy1i4dhme9usxvi9tv6" to_schema="sistema" to_table="orden_servicio" >
				<fk_column name="id_orden_servicio" pk="id_orden_servicio" />
			</fk>
			<fk name="fkbwun2hqo8cxhn0k28uj0wskkl" to_schema="sistema" to_table="recurso" >
				<fk_column name="id_recurso" pk="id_recurso" />
			</fk>
		</table>
		<table name="orden_servicio_tecnico" >
			<column name="id_orden_servicio_tecnico" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="comentario" type="varchar" length="300" decimal="0" jt="12" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="observacion" type="varchar" length="300" decimal="0" jt="12" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_orden_servicio" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_tecnico" type="integer" length="10" decimal="0" jt="4" />
			<column name="flag_principal" type="bool" length="1" decimal="0" jt="-7" />
			<index name="orden_servicio_tecnico_pkey" unique="PRIMARY_KEY" >
				<column name="id_orden_servicio_tecnico" />
			</index>
			<fk name="fkmtvdhsoidl85rbv7021bq9is4" to_schema="sistema" to_table="orden_servicio" >
				<fk_column name="id_orden_servicio" pk="id_orden_servicio" />
			</fk>
			<fk name="fk6tc7ocils2bwjwwxwir27qtbd" to_schema="sistema" to_table="tecnico" >
				<fk_column name="id_tecnico" pk="id_tecnico" />
			</fk>
		</table>
		<table name="parametros_mapa" >
			<column name="id_parametro_mapa" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="cantidad" type="varchar" length="300" decimal="0" jt="12" />
			<column name="descripcion" type="varchar" length="300" decimal="0" jt="12" />
			<column name="especilidad" type="varchar" length="300" decimal="0" jt="12" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="id_complejidad_servicio" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_padre" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_sub_tipo_solicitud" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_tipo_prioridad" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_tipo_solicitud" type="integer" length="10" decimal="0" jt="4" />
			<column name="subtabla" type="varchar" length="300" decimal="0" jt="12" />
			<column name="tabla" type="varchar" length="300" decimal="0" jt="12" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="valores" type="varchar" length="300" decimal="0" jt="12" />
			<index name="parametros_mapa_pkey" unique="PRIMARY_KEY" >
				<column name="id_parametro_mapa" />
			</index>
		</table>
		<table name="parametros_sistema" >
			<column name="id_parametro_sistema" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="cantidad" type="varchar" length="300" decimal="0" jt="12" />
			<column name="descripcion" type="varchar" length="300" decimal="0" jt="12" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="id_complejidad_servicio" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_padre" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_sub_tipo_solicitud" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_tipo_prioridad" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_tipo_solicitud" type="integer" length="10" decimal="0" jt="4" />
			<column name="subtabla" type="varchar" length="300" decimal="0" jt="12" />
			<column name="tabla" type="varchar" length="300" decimal="0" jt="12" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="valores" type="varchar" length="300" decimal="0" jt="12" />
			<column name="especialidad" type="varchar" length="300" decimal="0" jt="12" />
			<index name="parametros_sistema_pkey" unique="PRIMARY_KEY" >
				<column name="id_parametro_sistema" />
			</index>
		</table>
		<table name="programa_visita" >
			<column name="id_programa_visita" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="acepta_cliente" type="bool" length="1" decimal="0" jt="-7" />
			<column name="acepta_tecnico" type="bool" length="1" decimal="0" jt="-7" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="codigo_visita" type="varchar" length="500" decimal="0" jt="12" />
			<column name="descripcion" type="varchar" length="500" decimal="0" jt="12" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_programada" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_visita" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="observacion" type="varchar" length="500" decimal="0" jt="12" />
			<column name="programacion" type="varchar" length="200" decimal="0" jt="12" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<index name="programa_visita_pkey" unique="PRIMARY_KEY" >
				<column name="id_programa_visita" />
			</index>
		</table>
		<table name="programacion" >
			<column name="id_programacion" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="acepta_cliente" type="bool" length="1" decimal="0" jt="-7" />
			<column name="acepta_tecnico" type="bool" length="1" decimal="0" jt="-7" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_programada" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="programacion" type="varchar" length="200" decimal="0" jt="12" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_orden_servicio" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_visita" type="integer" length="10" decimal="0" jt="4" />
			<index name="programacion_pkey" unique="PRIMARY_KEY" >
				<column name="id_programacion" />
			</index>
			<fk name="fkam4ha5owkjfjgntuq55wrnknb" to_schema="sistema" to_table="visita" >
				<fk_column name="id_visita" pk="id_visita" />
			</fk>
		</table>
		<table name="recurso" >
			<column name="id_recurso" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="cantidad" type="integer" length="10" decimal="0" jt="4" />
			<column name="cod_recurso" type="varchar" length="20" decimal="0" jt="12" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="nombre" type="varchar" length="70" decimal="0" jt="12" />
			<column name="unidad_medida" type="varchar" length="255" decimal="0" jt="12" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<index name="recurso_pkey" unique="PRIMARY_KEY" >
				<column name="id_recurso" />
			</index>
		</table>
		<table name="solicitud" >
			<column name="id_solicitud" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="descripcion" type="varchar" length="400" decimal="0" jt="12" />
			<column name="direccion" type="varchar" length="200" decimal="0" jt="12" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_hora_fin" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_hora_inicio" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_registro" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="numero_solicitud" type="varchar" length="70" decimal="0" jt="12" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_cliente" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_complejidad_servicio" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_sub_tipo_solicitud" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_tipo_prioridad" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_tipo_solicitud" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_zona" type="integer" length="10" decimal="0" jt="4" />
			<index name="solicitud_pkey" unique="PRIMARY_KEY" >
				<column name="id_solicitud" />
			</index>
			<fk name="fka3i1tga5j01gi90rl5a4rorac" to_schema="sistema" to_table="cliente" >
				<fk_column name="id_cliente" pk="id_cliente" />
			</fk>
			<fk name="fk743lyd48qhw0fivu531lqtqhx" to_schema="sistema" to_table="complejidad_servicio" >
				<fk_column name="id_complejidad_servicio" pk="id_complejidad_servicio" />
			</fk>
			<fk name="fk5v4utcja12l2vddapd7krvguo" to_schema="sistema" to_table="sub_tipo_solicitud" >
				<fk_column name="id_sub_tipo_solicitud" pk="id_sub_tipo_solicitud" />
			</fk>
			<fk name="fktaou2m5jvqrmceexo4ysxn5yj" to_schema="sistema" to_table="tipo_prioridad" >
				<fk_column name="id_tipo_prioridad" pk="id_tipo_prioridad" />
			</fk>
			<fk name="fkeojvm7j56fqmarht8s8xyvcw0" to_schema="sistema" to_table="tipo_solicitud" >
				<fk_column name="id_tipo_solicitud" pk="id_tipo_solicitud" />
			</fk>
			<fk name="fknbwb2hd7rc9mwnbwj8mtcr4hp" to_schema="sistema" to_table="zona" >
				<fk_column name="id_zona" pk="id_zona" />
			</fk>
		</table>
		<table name="sub_tipo_solicitud" >
			<column name="id_sub_tipo_solicitud" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="sub_tipo_solicitud" type="varchar" length="70" decimal="0" jt="12" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_tipo_solicitud" type="integer" length="10" decimal="0" jt="4" />
			<index name="sub_tipo_solicitud_pkey" unique="PRIMARY_KEY" >
				<column name="id_sub_tipo_solicitud" />
			</index>
			<fk name="fkmc7x7nlfw4agejm0drcivmyq1" to_schema="sistema" to_table="tipo_solicitud" >
				<fk_column name="id_tipo_solicitud" pk="id_tipo_solicitud" />
			</fk>
		</table>
		<table name="tecnico" >
			<column name="id_tecnico" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="apellido_materno" type="varchar" length="300" decimal="0" jt="12" />
			<column name="apellido_paterno" type="varchar" length="300" decimal="0" jt="12" />
			<column name="archivo_foto" type="varchar" length="255" decimal="0" jt="12" />
			<column name="codigo_tecnico" type="varchar" length="300" decimal="0" jt="12" />
			<column name="es_supervisor" type="bool" length="1" decimal="0" jt="-7" />
			<column name="especialidad" type="varchar" length="300" decimal="0" jt="12" />
			<column name="experiencia_anios_anteriores" type="integer" length="10" decimal="0" jt="4" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_ingreso" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="nombre" type="varchar" length="300" decimal="0" jt="12" />
			<column name="observacion_reten" type="varchar" length="300" decimal="0" jt="12" />
			<column name="profesion" type="varchar" length="300" decimal="0" jt="12" />
			<column name="reten_contingencia" type="bool" length="1" decimal="0" jt="-7" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="id_zona" type="integer" length="10" decimal="0" jt="4" />
			<index name="tecnico_pkey" unique="PRIMARY_KEY" >
				<column name="id_tecnico" />
			</index>
			<fk name="fko49xtdvl1nb2asttune9hmyuq" to_schema="sistema" to_table="zona" >
				<fk_column name="id_zona" pk="id_zona" />
			</fk>
		</table>
		<table name="tipo_cliente" >
			<column name="id_tipo_cliente" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="tipo_cliente" type="varchar" length="70" decimal="0" jt="12" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<index name="tipo_cliente_pkey" unique="PRIMARY_KEY" >
				<column name="id_tipo_cliente" />
			</index>
		</table>
		<table name="tipo_prioridad" >
			<column name="id_tipo_prioridad" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="tipo_prioridad" type="varchar" length="70" decimal="0" jt="12" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<index name="tipo_prioridad_pkey" unique="PRIMARY_KEY" >
				<column name="id_tipo_prioridad" />
			</index>
		</table>
		<table name="tipo_solicitud" >
			<column name="id_tipo_solicitud" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="tipo_solicitud" type="varchar" length="70" decimal="0" jt="12" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<index name="tipo_solicitud_pkey" unique="PRIMARY_KEY" >
				<column name="id_tipo_solicitud" />
			</index>
		</table>
		<table name="visita" >
			<column name="id_visita" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="codigo_visita" type="varchar" length="500" decimal="0" jt="12" />
			<column name="descripcion" type="varchar" length="500" decimal="0" jt="12" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_visita" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="observacion" type="varchar" length="500" decimal="0" jt="12" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<index name="visita_pkey" unique="PRIMARY_KEY" >
				<column name="id_visita" />
			</index>
		</table>
		<table name="zona" >
			<column name="id_zona" type="serial" length="10" decimal="0" jt="4" mandatory="y" autoincrement="y" />
			<column name="activo" type="bool" length="1" decimal="0" jt="-7" />
			<column name="fecha_creacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_eliminacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="fecha_modificacion" type="timestamp" length="29" decimal="6" jt="93" />
			<column name="usuario_creacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_eliminacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="usuario_modificacion" type="integer" length="10" decimal="0" jt="4" />
			<column name="zona" type="varchar" length="70" decimal="0" jt="12" />
			<index name="zona_pkey" unique="PRIMARY_KEY" >
				<column name="id_zona" />
			</index>
		</table>
		<sequence name="calificacion_id_calificacion_seq" start="1" />
		<sequence name="capacitacion_tecnico_id_capacitacion_tecnico_seq" start="1" />
		<sequence name="cliente_id_cliente_seq" start="1" />
		<sequence name="complejidad_servicio_id_complejidad_servicio_seq" start="1" />
		<sequence name="encuesta_atencion_servicio_id_encuesta_atencion_servicio_seq" start="1" />
		<sequence name="estado_id_estado_seq" start="1" />
		<sequence name="estado_orden_id_estado_orden_seq" start="1" />
		<sequence name="estado_programa_visita_id_estado_programa_visita_seq" start="1" />
		<sequence name="estado_solicitud_id_estado_solicitud_seq" start="1" />
		<sequence name="grafico_id_grafico_seq" start="1" />
		<sequence name="graph_id_seq" start="1" />
		<sequence name="hoja_ruta_id_hoja_ruta_seq" start="1" />
		<sequence name="informe_id_informe_seq" start="1" />
		<sequence name="orden_servicio_id_orden_servicio_seq" start="1" />
		<sequence name="orden_servicio_recurso_id_orden_servicio_recurso_seq" start="1" />
		<sequence name="orden_servicio_tecnico_id_orden_servicio_tecnico_seq" start="1" />
		<sequence name="parametros_mapa_id_parametro_mapa_seq" start="1" />
		<sequence name="parametros_sistema_id_parametro_sistema_seq" start="1" />
		<sequence name="programa_visita_id_programa_visita_seq" start="1" />
		<sequence name="programacion_id_programacion_seq" start="1" />
		<sequence name="recurso_id_recurso_seq" start="1" />
		<sequence name="solicitud_id_solicitud_seq" start="1" />
		<sequence name="sub_tipo_solicitud_id_sub_tipo_solicitud_seq" start="1" />
		<sequence name="tecnico_id_tecnico_seq" start="1" />
		<sequence name="tipo_cliente_id_tipo_cliente_seq" start="1" />
		<sequence name="tipo_prioridad_id_tipo_prioridad_seq" start="1" />
		<sequence name="tipo_solicitud_id_tipo_solicitud_seq" start="1" />
		<sequence name="visita_id_visita_seq" start="1" />
		<sequence name="zona_id_zona_seq" start="1" />
		<procedure name="dijkstra" id="Procedure_432e270" isSystem="false" params_known="y" >
			<string><![CDATA[CREATE OR REPLACE FUNCTION sistema.dijkstra(v_graph_sql text, i_source bigint, i_target bigint)
 RETURNS TABLE(id bigint, vertex bigint, previous_vertex bigint, cost double precision)
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO 'pggraph', 'pg_temp'
AS $function$
DECLARE
  r_vertex RECORD;
  d_infinity DOUBLE PRECISION := 9999999999;
  i_current_vertex BIGINT;
  i_neighbour_vertex BIGINT;
  i_current_vertex_cost DOUBLE PRECISION;
BEGIN
  CREATE TEMP TABLE IF NOT EXISTS dijkstra_graph (
    id BIGINT
  , source BIGINT
  , target BIGINT
  , cost DOUBLE PRECISION
  ) ON COMMIT DROP;
  CREATE TEMP TABLE IF NOT EXISTS dijkstra_result (
    id BIGINT
  , vertex BIGINT
  , previous_vertex BIGINT
  , cost DOUBLE PRECISION
  , is_visited BOOLEAN
  ) ON COMMIT DROP;
  DELETE FROM dijkstra_graph;
  DELETE FROM dijkstra_result;
  EXECUTE 'INSERT INTO dijkstra_graph (id, source, target, cost) ' || v_graph_sql;
  INSERT INTO dijkstra_result (id, vertex, previous_vertex, cost, is_visited)
  SELECT NULL::BIGINT, dg.source, NULL::BIGINT, d_infinity, FALSE FROM dijkstra_graph dg
  UNION
  SELECT NULL::BIGINT, dg.target, NULL::BIGINT, d_infinity, FALSE FROM dijkstra_graph dg;
  UPDATE dijkstra_result dr SET cost = 0 WHERE dr.vertex = i_source;
  LOOP
	i_current_vertex := NULL;
  	SELECT dr.vertex, dr.cost
  	INTO i_current_vertex, i_current_vertex_cost
  	FROM dijkstra_result dr
  	WHERE dr.is_visited = FALSE AND dr.cost < d_infinity
  	ORDER BY cost ASC
  	LIMIT 1;
  	EXIT WHEN i_current_vertex IS NULL OR (i_target IS NOT NULL AND i_current_vertex = i_target);
  	UPDATE dijkstra_result dr SET is_visited = TRUE WHERE dr.vertex = i_current_vertex;
	UPDATE dijkstra_result dr
	SET id = dg.id
	  , previous_vertex = i_current_vertex
	  , cost = i_current_vertex_cost + dg.cost
	FROM dijkstra_graph dg
	WHERE dr.vertex = dg.target
	  AND dr.is_visited = FALSE
	  AND dg.source = i_current_vertex
	  AND (i_current_vertex_cost + dg.cost) < dr.cost;
  END LOOP;
  IF i_target IS NULL THEN
  	RETURN QUERY SELECT dr.id, dr.vertex, dr.previous_vertex, dr.cost FROM dijkstra_result dr;
  ELSE
  	RETURN QUERY WITH RECURSIVE backtrack_dijkstra_result(id, vertex, previous_vertex, cost) AS (
  		SELECT dr.id, dr.vertex, dr.previous_vertex, dr.cost
  		FROM dijkstra_result dr
  		WHERE dr.vertex = i_target
  		
  		UNION ALL
  		
  		SELECT dr.id, dr.vertex, dr.previous_vertex, dr.cost
  		FROM dijkstra_result dr, backtrack_dijkstra_result bdr
  		WHERE dr.vertex = bdr.previous_vertex
  	) SELECT bdr.id, bdr.vertex, bdr.previous_vertex, bdr.cost
  	FROM backtrack_dijkstra_result bdr;
  END IF;
END
$function$
;]]></string>
			<input_param name="v_graph_sql" jt="12" type="text" />
			<input_param name="i_source" jt="-5" type="int8" />
			<input_param name="i_target" jt="-5" type="int8" />
			<result_param name="id" jt="-5" type="int8" />
			<result_param name="vertex" jt="-5" type="int8" />
			<result_param name="previous_vertex" jt="-5" type="int8" />
			<result_param name="cost" jt="8" type="float8" />
		</procedure>
		<procedure name="fn_busqueda_heuristica" id="Procedure_410fb9b" isSystem="false" params_known="y" >
			<string><![CDATA[CREATE OR REPLACE FUNCTION sistema.fn_busqueda_heuristica(_id_solicitud integer)
 RETURNS character varying
 LANGUAGE plpgsql
AS $function$
declare _id_tipo_prioridad integer ;
_id_tipo_solicitud integer;
_id_sub_tipo_solicitud integer;
_id_zona integer;
_id_complejidad_servicio integer;
_tipo_prioridad character varying ;
_tipo_solicitud character varying;
_sub_tipo_solicitud character varying;
_complejidad_servicio character varying;
_numero_registros integer;
_min_calificacion decimal;
_promedio decimal;
_resolucion character varying;
_return character varying;
BEGIN
  _resolucion:='';
 
SELECT solicitud.id_tipo_solicitud
,tipo_solicitud.tipo_solicitud
,solicitud.id_tipo_prioridad
,tipo_prioridad.tipo_prioridad
,solicitud.id_sub_tipo_solicitud
,sub_tipo_solicitud.sub_tipo_solicitud
,solicitud.id_complejidad_servicio
,complejidad_servicio.complejidad_servicio
,id_zona
INTO _id_tipo_solicitud
,_tipo_solicitud
,_id_tipo_prioridad
,_tipo_prioridad
,_id_sub_tipo_solicitud
,_sub_tipo_solicitud
,_id_complejidad_servicio
,_complejidad_servicio
,_id_zona
  FROM sistema.solicitud
  inner join sistema.tipo_prioridad on solicitud.id_tipo_prioridad= tipo_prioridad.id_tipo_prioridad
  inner join sistema.tipo_solicitud on solicitud.id_tipo_solicitud= tipo_solicitud.id_tipo_solicitud
  inner join sistema.sub_tipo_solicitud on solicitud.id_tipo_solicitud= sub_tipo_solicitud.id_tipo_solicitud and solicitud.id_sub_tipo_solicitud= sub_tipo_solicitud.id_sub_tipo_solicitud
  inner join sistema.complejidad_servicio on complejidad_servicio.id_complejidad_servicio= solicitud.id_complejidad_servicio
  where  solicitud.id_solicitud=_id_solicitud;
select (case _tipo_prioridad
 when 'Emergencia' then
  case _tipo_solicitud
   when 'Mantenimiento Preventivo' then
    case _sub_tipo_solicitud
     when 'Sistema de Cámaras de Videovigilancia' then
      case _complejidad_servicio
       when 'Alto' then
        4.55
       when 'Medio' then
        4.525
       when 'Bajo' then
        4.5
       else 4.475
      end
     when 'Sistema de Alarmas de Seguridad de Instrución' then
      case _complejidad_servicio
       when 'Alto' then
        4.45
       when 'Medio' then
        4.425
       when 'Bajo' then
        4.4
       else 4.375
      end
     when 'Sistema de Alarmas Contra Incendios' then
      case _complejidad_servicio
       when 'Alto' then
        4.35
       when 'Medio' then
        4.325
       when 'Bajo' then
        4.3
       else 4.275
      end
     when 'Sistema de Circuito Cerrado TV' then
      case _complejidad_servicio
       when 'Alto' then
        4.25
       when 'Medio' then
        4.225
       when 'Bajo' then
        4.2
       else 4.175
      end
     when 'Sistema de Control de Accesos' then
      case _complejidad_servicio
       when 'Alto' then
        4.15
       when 'Medio' then
        4.125
       when 'Bajo' then
        4.1
       else 4.075
      end
     else 4.05
    end
   when 'Mantenimiento Correctivo' then
    case _sub_tipo_solicitud
     when 'Sistema de Cámaras de Videovigilancia' then
      case _complejidad_servicio
       when 'Alto' then
        4.025
       when 'Medio' then
        4
       when 'Bajo' then
        3.975
       else 3.95
      end
     when 'Sistema de Alarmas de Seguridad de Instrución' then
      case _complejidad_servicio
       when 'Alto' then
        3.925
       when 'Medio' then
        3.9
       when 'Bajo' then
        3.875
       else 3.85
      end
     when 'Sistema de Alarmas Contra Incendios' then
      case _complejidad_servicio
       when 'Alto' then
        3.825
       when 'Medio' then
        3.8
       when 'Bajo' then
        3.775
       else 3.75
      end
     when 'Sistema de Circuito Cerrado TV' then
      case _complejidad_servicio
       when 'Alto' then
        3.725
       when 'Medio' then
        3.7
       when 'Bajo' then
        3.675
       else 3.65
      end
     when 'Sistema de Control de Accesos' then
      case _complejidad_servicio
       when 'Alto' then
        3.625
       when 'Medio' then
        3.6
       when 'Bajo' then
        3.575
       else 3.55
      end
     else 4.5
    end
   when 'Instalación' then
    case _sub_tipo_solicitud
     when 'Sistema de Cámaras de Videovigilancia' then
      case _complejidad_servicio
       when 'Alto' then
        4.475
       when 'Medio' then
        4.45
       when 'Bajo' then
        4.425
       else 4.4
      end
     when 'Sistema de Alarmas de Seguridad de Instrución' then
      case _complejidad_servicio
       when 'Alto' then
        4.375
       when 'Medio' then
        4.35
       when 'Bajo' then
        4.325
       else 4.3
      end
     when 'Sistema de Alarmas Contra Incendios' then
      case _complejidad_servicio
       when 'Alto' then
        4.275
       when 'Medio' then
        4.25
       when 'Bajo' then
        4.225
       else 4.2
      end
     when 'Sistema de Circuito Cerrado TV' then
      case _complejidad_servicio
       when 'Alto' then
        4.175
       when 'Medio' then
        4.15
       when 'Bajo' then
        4.125
       else 4.1
      end
     when 'Sistema de Control de Accesos' then
      case _complejidad_servicio
       when 'Alto' then
        4.075
       when 'Medio' then
        4.05
       when 'Bajo' then
        4.025
       else 4  
      end
     else 3.875
    end
   else 3.85
  end
 when 'Programada' then
  case _tipo_solicitud
   when 'Mantenimiento Preventivo' then
    case _sub_tipo_solicitud
     when 'Sistema de Cámaras de Videovigilancia' then
      case _complejidad_servicio
       when 'Alto' then
        3.825
       when 'Medio' then
        3.8
       when 'Bajo' then
        3.775
       else 3.75
      end
     when 'Sistema de Alarmas de Seguridad de Instrución' then
      case _complejidad_servicio
       when 'Alto' then
        3.725
       when 'Medio' then
        3.7
       when 'Bajo' then
        3.675
       else 3.65
      end
     when 'Sistema de Alarmas Contra Incendios' then
      case _complejidad_servicio
       when 'Alto' then
        3.625
       when 'Medio' then
        3.6
       when 'Bajo' then
        3.575
       else 4.5
      end
     when 'Sistema de Circuito Cerrado TV' then
      case _complejidad_servicio
       when 'Alto' then
        4.475
       when 'Medio' then
        4.45
       when 'Bajo' then
        4.425
       else 4.4
      end
     when 'Sistema de Control de Accesos' then
      case _complejidad_servicio
       when 'Alto' then
        4.375
       when 'Medio' then
        4.35
       when 'Bajo' then
        4.325
       else 4.3
      end
     else 4.275
    end
   when 'Mantenimiento Correctivo' then
    case _sub_tipo_solicitud
     when 'Sistema de Cámaras de Videovigilancia' then
      case _complejidad_servicio
       when 'Alto' then
        4.25
       when 'Medio' then
        4.225
       when 'Bajo' then
        4.2
       else 4.175
      end
     when 'Sistema de Alarmas de Seguridad de Instrución' then
      case _complejidad_servicio
       when 'Alto' then
        4.15
       when 'Medio' then
        4.125
       when 'Bajo' then
        4.1
       else 4.075
      end
     when 'Sistema de Alarmas Contra Incendios' then
      case _complejidad_servicio
       when 'Alto' then
        4.05
       when 'Medio' then
        4.025
       when 'Bajo' then
        4
       else 3.975
      end
     when 'Sistema de Circuito Cerrado TV' then
      case _complejidad_servicio
       when 'Alto' then
        3.95
       when 'Medio' then
        3.925
       when 'Bajo' then
        3.9
       else 3.875
      end
     when 'Sistema de Control de Accesos' then
      case _complejidad_servicio
       when 'Alto' then
        3.85
       when 'Medio' then
        3.825
       when 'Bajo' then
        3.8
       else 3.775
      end
     else 3.75
    end
   when 'Instalación' then
    case _sub_tipo_solicitud
     when 'Sistema de Cámaras de Videovigilancia' then
      case _complejidad_servicio
       when 'Alto' then
        3.725
       when 'Medio' then
        3.7
       when 'Bajo' then
        3.675
       else 3.65
      end
     when 'Sistemaa de Alarmas de Seguridad de Instrución' then
      case _complejidad_servicio
       when 'Alto' then
        3.625
       when 'Medio' then
        3.6
       when 'Bajo' then
        3.575
       else 4.5
      end
     when 'Sistema de Alarmas Contra Incendios' then
      case _complejidad_servicio
       when 'Alto' then
        4.475
       when 'Medio' then
        4.45
       when 'Bajo' then
        4.425
       else 4.4
      end
     when 'Sistema de Circuito Cerrado TV' then
      case _complejidad_servicio
       when 'Alto' then
        4.375
       when 'Medio' then
        4.35
       when 'Bajo' then
        4.325
       else 4.3
      end
     when 'Sistema de Control de Accesos' then
      case _complejidad_servicio
       when 'Alto' then
        4.275
       when 'Medio' then
        4.25
       when 'Bajo' then
        4.225
       else 4.2
      end
     else 4.075
    end
   else 4.05
  end
 else 4.025
end) into _min_calificacion;

select cast(count(1) as integer) into _numero_registros
from sistema.tecnico
inner join sistema.calificacion on tecnico.id_tecnico=calificacion.id_tecnico
where  id_zona=_id_zona
and tecnico.activo=true
and calificacion.activo=true
and (sistema.fn_promedio_busqueda_euristica((tecnico.experiencia_anios_anteriores + cast(DATE_PART('year', now()) - DATE_PART('year', tecnico.fecha_ingreso) as integer))
,sistema.fn_nivel_conocimiento(tecnico.id_tecnico),calificacion.calificacion_cliente,calificacion.calificacion_coodinador) >= _min_calificacion);
WHILE _numero_registros = 0  LOOP
_min_calificacion=cast((_min_calificacion-0.5) as decimal);
select cast(count(1) as integer) into _numero_registros
from sistema.tecnico inner join sistema.calificacion on tecnico.id_tecnico=calificacion.id_tecnico
where  id_zona=_id_zona
and tecnico.activo=true
and calificacion.activo=true
and (sistema.fn_promedio_busqueda_euristica((tecnico.experiencia_anios_anteriores + cast(DATE_PART('year', now()) - DATE_PART('year', tecnico.fecha_ingreso) as integer))
,sistema.fn_nivel_conocimiento(tecnico.id_tecnico),calificacion.calificacion_cliente,calificacion.calificacion_coodinador) >= _min_calificacion);
   
END LOOP;


_return:=(
SELECT array_to_json(array_agg(DATA))
FROM
(
select a.* from (select cast('normal' as character varying) as tipo_lista
,tecnico.id_tecnico
,cast(tecnico.nombre ||' '||tecnico.apellido_paterno ||' '||tecnico.apellido_materno as character varying) as nombre_completo
,cast(sistema.fn_promedio_busqueda_euristica((tecnico.experiencia_anios_anteriores + cast(DATE_PART('year', now()) - DATE_PART('year', tecnico.fecha_ingreso) as integer))
,sistema.fn_nivel_conocimiento(tecnico.id_tecnico),calificacion.calificacion_cliente,calificacion.calificacion_coodinador) as character varying) calificacion
,tecnico.especialidad,tecnico.archivo_foto
,cast(sistema.fn_capacitaciones_tecnico(tecnico.id_tecnico) as character varying) capacitaciones
from sistema.tecnico inner join sistema.calificacion on tecnico.id_tecnico=calificacion.id_tecnico
where  id_zona=_id_zona
and tecnico.activo=true
and calificacion.activo=true and cast(DATE_PART('month', now())as integer)=cast(calificacion.mes as integer)
and (sistema.fn_promedio_busqueda_euristica((tecnico.experiencia_anios_anteriores + cast(DATE_PART('year', now()) - DATE_PART('year', tecnico.fecha_ingreso) as integer))
,sistema.fn_nivel_conocimiento(tecnico.id_tecnico),calificacion.calificacion_cliente,calificacion.calificacion_coodinador) >= _min_calificacion) union all
select cast('contingencia' as character varying)as tipo_lista,tecnico.id_tecnico
,cast(tecnico.nombre ||' '||tecnico.apellido_paterno ||' '||tecnico.apellido_materno as character varying) as nombre_completo
,cast( sistema.fn_promedio_busqueda_euristica((tecnico.experiencia_anios_anteriores + cast(DATE_PART('year', now()) - DATE_PART('year', tecnico.fecha_ingreso) as integer))
,sistema.fn_nivel_conocimiento(tecnico.id_tecnico),calificacion.calificacion_cliente,calificacion.calificacion_coodinador) as character varying) calificacion
,tecnico.especialidad,tecnico.archivo_foto
,cast(sistema.fn_capacitaciones_tecnico(tecnico.id_tecnico) as character varying) capacitaciones
from sistema.tecnico inner join sistema.calificacion on tecnico.id_tecnico=calificacion.id_tecnico  
where reten_contingencia=true
and id_zona!=_id_zona
and tecnico.activo=true
and calificacion.activo=true and cast(DATE_PART('month', now())as integer)=cast(calificacion.mes as integer)
and (sistema.fn_promedio_busqueda_euristica((tecnico.experiencia_anios_anteriores + cast(DATE_PART('year', now()) - DATE_PART('year', tecnico.fecha_ingreso) as integer))
,sistema.fn_nivel_conocimiento(tecnico.id_tecnico),calificacion.calificacion_cliente,calificacion.calificacion_coodinador) >= _min_calificacion)) a
order by a.tipo_lista desc,a.id_tecnico
) AS DATA
);
RETURN _return;



END;
$function$
;]]></string>
			<input_param name="_id_solicitud" jt="4" type="int4" />
			<result_param name="returnValue" jt="12" type="varchar" />
		</procedure>
		<procedure name="fn_busqueda_orden_servicio" id="Procedure_315ba5a" isSystem="false" params_known="y" >
			<string><![CDATA[CREATE OR REPLACE FUNCTION sistema.fn_busqueda_orden_servicio(_id_orden_servicio integer, _fecha_recepcion character varying, _id_tipo_solicitud integer, _id_estado integer)
 RETURNS character varying
 LANGUAGE plpgsql
AS $function$
DECLARE _resultado character varying;
BEGIN
_resultado:=(
	SELECT row_to_json(tmpOrdenServicio)
	FROM
	(
		SELECT (
			SELECT array_to_json(array_agg(DATA))
			FROM(
				SELECT
				cast(ROW_NUMBER () OVER (ORDER BY os.id_orden_servicio desc) as integer) nro,
				os.id_orden_servicio,
				os.numero_orden,
				(
					SELECT (
						SELECT array_to_json(array_agg(tmpsolicitud))
						FROM
						(
							SELECT sol.id_solicitud,
							sol.numero_solicitud,
							(
								SELECT (
									SELECT array_to_json(array_agg(tmpcliente))
									FROM
									(
										SELECT cli.id_cliente,
										(
											SELECT (
												SELECT array_to_json(array_agg(tmptipocliente))
												FROM
												(
													SELECT tcli.id_tipo_cliente,
													tcli.tipo_cliente,
													tcli.activo
													FROM sistema.tipo_cliente tcli
													WHERE tcli.activo=true AND tcli.id_tipo_cliente =cli.id_tipo_cliente
												) AS tmptipocliente
											) AS tipo_cliente
										),
										cli.cliente,
										cli.representante,
										cli.direccion,
										cli.ubicacion,
										cli.activo
										FROM sistema.cliente cli
										WHERE cli.activo=true AND cli.id_cliente =sol.id_cliente
									) AS tmpcliente
								) AS cliente
							),
							sol.descripcion,
							sol.direccion,
							sol.prioridad,
							sol.fecha_hora_inicio,
							sol.fecha_hora_fin,
							sol.fecha_registro,
							sol.activo
							FROM sistema.solicitud sol
							WHERE sol.activo=true AND sol.id_solicitud =os.id_solicitud
						) AS tmpsolicitud
					) AS solicitud
				),
				(
					SELECT (
						SELECT array_to_json(array_agg(tmpestado))
						FROM
						(
							SELECT est.id_estado,
							est.estado
							FROM sistema.estado est
							INNER JOIN sistema.estado_solicitud estsol ON est.id_estado=estsol.id_estado
							WHERE est.activo=true AND estsol.activo=true
							AND estsol.id_solicitud=s.id_solicitud 
							AND (_id_estado=0 OR estsol.id_estado=_id_estado)
						) AS tmpestado
					) AS estado_solicitud
				),
				(
					SELECT (
						SELECT array_to_json(array_agg(tmpzona))
						FROM
						(
							SELECT z.id_zona,
							z.zona,
							z.activo
							FROM sistema.zona z
							WHERE z.activo=true AND z.id_zona = s.id_zona 
						) AS tmpzona
					) AS zona
				),
				(
					SELECT (
						SELECT array_to_json(array_agg(tmptiposolicitud))
						FROM
						(
							SELECT tsol.id_tipo_prioridad,
							tsol.tipo_prioridad,
							tsol.activo
							FROM sistema.tipo_prioridad tsol
							WHERE tsol.activo=true AND tsol.id_tipo_prioridad = s.id_tipo_prioridad
						) AS tmptiposolicitud
					) AS tipo_prioridad
				),
				(
					SELECT (
						SELECT array_to_json(array_agg(tmpcomplejidadservicio))
						FROM
						(
							SELECT com.id_complejidad_servicio,
							com.complejidad_servicio,
							com.activo
							FROM sistema.complejidad_servicio com
							WHERE com.activo=true AND com.id_complejidad_servicio = s.id_complejidad_servicio
						) AS tmpcomplejidadservicio
					) AS complejidad_servicio
				),
				(
					SELECT (
						SELECT array_to_json(array_agg(tmpsubtipodescripcionsolicitud))
						FROM
						(
							SELECT stds.id_sub_tipo_solicitud,
								stds.sub_tipo_solicitud,
								(
									SELECT (
										SELECT array_to_json(array_agg(tmptipodescripcionsolicitud))
										FROM
										(
											SELECT tds.id_tipo_solicitud,
											tds.tipo_solicitud,
											tds.activo
											FROM sistema.tipo_solicitud tds
											WHERE tds.activo=true AND tds.id_tipo_solicitud = stds.id_tipo_solicitud
										) AS tmptipodescripcionsolicitud
									) AS tipo_solicitud
								),
								stds.activo
							FROM sistema.sub_tipo_solicitud stds
							WHERE stds.activo=true and stds.id_sub_tipo_solicitud = s.id_sub_tipo_solicitud
							and stds.id_tipo_solicitud=s.id_tipo_solicitud
						) AS tmpsubtipodescripcionsolicitud
					) AS sub_tipo_solicitud
				),
				os.activo
			from sistema.orden_servicio os
			INNER JOIN sistema.solicitud s ON os.id_solicitud=s.id_solicitud
			WHERE os.activo=true AND s.activo=true 
			AND (_id_orden_servicio=0 OR os.id_orden_servicio=_id_orden_servicio)
			AND (_fecha_recepcion ='19000101' or TO_CHAR(s.fecha_registro,'YYYYMMDD') = _fecha_recepcion)
			AND (_id_tipo_solicitud=0 OR s.id_tipo_solicitud=_id_tipo_solicitud)
			AND EXISTS(SELECT 1 FROM sistema.estado_solicitud es where (_id_estado=0 OR es.id_estado=_id_estado) and es.id_solicitud=s.id_solicitud and es.activo=true)
			) AS DATA
		) as Lista_Orden_servicio
	)tmpOrdenServicio
	);
RETURN _resultado;
END;
$function$
;]]></string>
			<input_param name="_id_orden_servicio" jt="4" type="int4" />
			<input_param name="_fecha_recepcion" jt="12" type="varchar" />
			<input_param name="_id_tipo_solicitud" jt="4" type="int4" />
			<input_param name="_id_estado" jt="4" type="int4" />
			<result_param name="returnValue" jt="12" type="varchar" />
		</procedure>
		<procedure name="fn_busqueda_orden_servicio_pag" id="Procedure_2fe4f0c" isSystem="false" params_known="y" >
			<string><![CDATA[CREATE OR REPLACE FUNCTION sistema.fn_busqueda_orden_servicio_pag(_id_orden_servicio integer, _fecha_recepcion character varying, _id_tipo_solicitud integer, _id_estado integer, _skip integer, _take integer)
 RETURNS character varying
 LANGUAGE plpgsql
AS $function$
DECLARE _resultado character varying;
declare _total_registros integer;
BEGIN
SELECT count(1) INTO _total_registros
FROM sistema.orden_servicio os
INNER JOIN sistema.solicitud s ON os.id_solicitud=s.id_solicitud
WHERE os.activo=true AND s.activo=true
AND (_id_orden_servicio=0 OR os.id_orden_servicio=_id_orden_servicio)
AND (_fecha_recepcion ='19000101' OR TO_CHAR(s.fecha_registro,'YYYYMMDD') = _fecha_recepcion)
AND (_id_tipo_solicitud=0 OR s.id_tipo_solicitud=_id_tipo_solicitud)
AND EXISTS(SELECT 1 FROM sistema.estado_solicitud es WHERE (_id_estado=0 OR es.id_estado=_id_estado) AND es.id_solicitud=s.id_solicitud AND es.activo=true);

_resultado:=(
SELECT row_to_json(tmpOrdenServicio)
FROM
(
SELECT (
SELECT array_to_json(array_agg(DATA))
FROM(
SELECT
cast(ROW_NUMBER () OVER (ORDER BY os.id_orden_servicio desc) as integer) nro,
os.id_orden_servicio,
os.numero_orden,
(
SELECT (
SELECT array_to_json(array_agg(tmpsolicitud))
FROM
(
SELECT sol.id_solicitud,
sol.numero_solicitud,
(
SELECT (
SELECT array_to_json(array_agg(tmpcliente))
FROM
(
SELECT cli.id_cliente,
(
SELECT (
SELECT array_to_json(array_agg(tmptipocliente))
FROM
(
SELECT tcli.id_tipo_cliente,
tcli.tipo_cliente,
tcli.activo
FROM sistema.tipo_cliente tcli
WHERE tcli.activo=true AND tcli.id_tipo_cliente =cli.id_tipo_cliente
) AS tmptipocliente
) AS tipo_cliente
),
cli.cliente,
cli.representante,
cli.direccion,
cli.ubicacion,
cli.activo
FROM sistema.cliente cli
WHERE cli.activo=true AND cli.id_cliente =sol.id_cliente
) AS tmpcliente
) AS cliente
),
sol.descripcion,
sol.direccion,
sol.prioridad,
sol.fecha_hora_inicio,
sol.fecha_hora_fin,
sol.fecha_registro,
sol.activo
FROM sistema.solicitud sol
WHERE sol.activo=true AND sol.id_solicitud =os.id_solicitud
) AS tmpsolicitud
) AS solicitud
),
(
SELECT (
SELECT array_to_json(array_agg(tmpestado))
FROM
(
SELECT est.id_estado,
est.estado
FROM sistema.estado est
INNER JOIN sistema.estado_solicitud estsol ON est.id_estado=estsol.id_estado
WHERE est.activo=true AND estsol.activo=true
AND estsol.id_solicitud=s.id_solicitud
AND (_id_estado=0 OR estsol.id_estado=_id_estado)
) AS tmpestado
) AS estado_solicitud
),
(
SELECT (
SELECT array_to_json(array_agg(tmpzona))
FROM
(
SELECT z.id_zona,
z.zona,
z.activo
FROM sistema.zona z
WHERE z.activo=true AND z.id_zona = s.id_zona
) AS tmpzona
) AS zona
),
(
SELECT (
SELECT array_to_json(array_agg(tmptiposolicitud))
FROM
(
SELECT tsol.id_tipo_prioridad,
tsol.tipo_prioridad,
tsol.activo
FROM sistema.tipo_prioridad tsol
WHERE tsol.activo=true AND tsol.id_tipo_prioridad = s.id_tipo_prioridad
) AS tmptiposolicitud
) AS tipo_prioridad
),
(
SELECT (
SELECT array_to_json(array_agg(tmpcomplejidadservicio))
FROM
(
SELECT com.id_complejidad_servicio,
com.complejidad_servicio,
com.activo
FROM sistema.complejidad_servicio com
WHERE com.activo=true AND com.id_complejidad_servicio = s.id_complejidad_servicio
) AS tmpcomplejidadservicio
) AS complejidad_servicio
),
(
SELECT (
SELECT array_to_json(array_agg(tmpsubtipodescripcionsolicitud))
FROM
(
SELECT stds.id_sub_tipo_solicitud,
stds.sub_tipo_solicitud,
(
SELECT (
SELECT array_to_json(array_agg(tmptipodescripcionsolicitud))
FROM
(
SELECT tds.id_tipo_solicitud,
tds.tipo_solicitud,
tds.activo
FROM sistema.tipo_solicitud tds
WHERE tds.activo=true AND tds.id_tipo_solicitud = stds.id_tipo_solicitud
) AS tmptipodescripcionsolicitud
) AS tipo_solicitud
),
stds.activo
FROM sistema.sub_tipo_solicitud stds
WHERE stds.activo=true and stds.id_sub_tipo_solicitud = s.id_sub_tipo_solicitud
and stds.id_tipo_solicitud=s.id_tipo_solicitud
) AS tmpsubtipodescripcionsolicitud
) AS sub_tipo_solicitud
),
os.activo,
coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'0') as porcentaje,
(case when to_number(coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'000.00'),'999D99')=to_number('100.00','999D99') then 2 when to_number(coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'000.00'),'999D99')<to_number('100.00','999D99') then  1 else 0 end) as reasigna,
(case when to_number(coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'000.00'),'999D99')=to_number('100.00','999D99') then 'completo' when to_number('50.00','999D99')<to_number(coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'000.00'),'999D99') and to_number(coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'000.00'),'999D99')<to_number('100.00','999D99') then  'porCompletar'
when to_number('000.00','999D99')<to_number(coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'000.00'),'999D99') and to_number(coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'000.00'),'999D99')<to_number('051.00','999D99') then  'iniciado' else 'sinAsignar' end) as porcentaje_estado,
                               _total_registros as total_registros
from sistema.orden_servicio os
INNER JOIN sistema.solicitud s ON os.id_solicitud=s.id_solicitud
WHERE os.activo=true AND s.activo=true
AND (_id_orden_servicio=0 OR os.id_orden_servicio=_id_orden_servicio)
AND (_fecha_recepcion ='19000101' or TO_CHAR(s.fecha_registro,'YYYYMMDD') = _fecha_recepcion)
AND (_id_tipo_solicitud=0 OR s.id_tipo_solicitud=_id_tipo_solicitud)
AND EXISTS(SELECT 1 FROM sistema.estado_solicitud es where (_id_estado=0 OR es.id_estado=_id_estado) and es.id_solicitud=s.id_solicitud and es.activo=true)
ORDER BY os.id_orden_servicio DESC
     LIMIT _take  OFFSET _skip
) AS DATA
) as Lista_Orden_servicio
)tmpOrdenServicio
);
RETURN _resultado;
END;
$function$
;]]></string>
			<input_param name="_id_orden_servicio" jt="4" type="int4" />
			<input_param name="_fecha_recepcion" jt="12" type="varchar" />
			<input_param name="_id_tipo_solicitud" jt="4" type="int4" />
			<input_param name="_id_estado" jt="4" type="int4" />
			<input_param name="_skip" jt="4" type="int4" />
			<input_param name="_take" jt="4" type="int4" />
			<result_param name="returnValue" jt="12" type="varchar" />
		</procedure>
		<procedure name="fn_busqueda_orden_servicio_pag_num" id="Procedure_27c4902" isSystem="false" params_known="y" >
			<string><![CDATA[CREATE OR REPLACE FUNCTION sistema.fn_busqueda_orden_servicio_pag_num(_numero_orden character varying, _fecha_recepcion character varying, _id_tipo_solicitud integer, _id_estado integer, _skip integer, _take integer)
 RETURNS character varying
 LANGUAGE plpgsql
AS $function$
DECLARE _resultado character varying;
declare _total_registros integer;
BEGIN
SELECT count(1) INTO _total_registros
FROM sistema.orden_servicio os
INNER JOIN sistema.solicitud s ON os.id_solicitud=s.id_solicitud
WHERE os.activo=true AND s.activo=true
AND (_numero_orden='0' OR upper(os.numero_orden) like '%'||upper(_numero_orden)||'%')
AND (_fecha_recepcion ='19000101' OR TO_CHAR(s.fecha_registro,'YYYYMMDD') = _fecha_recepcion)
AND (_id_tipo_solicitud=0 OR s.id_tipo_solicitud=_id_tipo_solicitud)
AND EXISTS(SELECT 1 FROM sistema.estado_solicitud es WHERE (_id_estado=0 OR es.id_estado=_id_estado) AND es.id_solicitud=s.id_solicitud AND es.activo=true);

_resultado:=(
SELECT row_to_json(tmpOrdenServicio)
FROM
(
SELECT (
SELECT array_to_json(array_agg(DATA))
FROM(
SELECT
cast(ROW_NUMBER () OVER (ORDER BY os.id_orden_servicio desc) as integer) nro,
os.id_orden_servicio,
os.numero_orden,
(
SELECT (
SELECT array_to_json(array_agg(tmpsolicitud))
FROM
(
SELECT sol.id_solicitud,
sol.numero_solicitud,
(
SELECT (
SELECT array_to_json(array_agg(tmpcliente))
FROM
(
SELECT cli.id_cliente,
(
SELECT (
SELECT array_to_json(array_agg(tmptipocliente))
FROM
(
SELECT tcli.id_tipo_cliente,
tcli.tipo_cliente,
tcli.activo
FROM sistema.tipo_cliente tcli
WHERE tcli.activo=true AND tcli.id_tipo_cliente =cli.id_tipo_cliente
) AS tmptipocliente
) AS tipo_cliente
),
cli.cliente,
cli.representante,
cli.direccion,
cli.ubicacion,
cli.activo
FROM sistema.cliente cli
WHERE cli.activo=true AND cli.id_cliente =sol.id_cliente
) AS tmpcliente
) AS cliente
),
sol.descripcion,
sol.direccion,
sol.prioridad,
sol.fecha_hora_inicio,
sol.fecha_hora_fin,
sol.fecha_registro,
sol.activo
FROM sistema.solicitud sol
WHERE sol.activo=true AND sol.id_solicitud =os.id_solicitud
) AS tmpsolicitud
) AS solicitud
),
(
SELECT (
SELECT array_to_json(array_agg(tmpestado))
FROM
(
SELECT est.id_estado,
est.estado
FROM sistema.estado est
INNER JOIN sistema.estado_solicitud estsol ON est.id_estado=estsol.id_estado
WHERE est.activo=true AND estsol.activo=true
AND estsol.id_solicitud=s.id_solicitud
AND (_id_estado=0 OR estsol.id_estado=_id_estado)
) AS tmpestado
) AS estado_solicitud
),
(
SELECT (
SELECT array_to_json(array_agg(tmpzona))
FROM
(
SELECT z.id_zona,
z.zona,
z.activo
FROM sistema.zona z
WHERE z.activo=true AND z.id_zona = s.id_zona
) AS tmpzona
) AS zona
),
(
SELECT (
SELECT array_to_json(array_agg(tmptiposolicitud))
FROM
(
SELECT tsol.id_tipo_prioridad,
tsol.tipo_prioridad,
tsol.activo
FROM sistema.tipo_prioridad tsol
WHERE tsol.activo=true AND tsol.id_tipo_prioridad = s.id_tipo_prioridad
) AS tmptiposolicitud
) AS tipo_prioridad
),
(
SELECT (
SELECT array_to_json(array_agg(tmpcomplejidadservicio))
FROM
(
SELECT com.id_complejidad_servicio,
com.complejidad_servicio,
com.activo
FROM sistema.complejidad_servicio com
WHERE com.activo=true AND com.id_complejidad_servicio = s.id_complejidad_servicio
) AS tmpcomplejidadservicio
) AS complejidad_servicio
),
(
SELECT (
SELECT array_to_json(array_agg(tmpsubtipodescripcionsolicitud))
FROM
(
SELECT stds.id_sub_tipo_solicitud,
stds.sub_tipo_solicitud,
(
SELECT (
SELECT array_to_json(array_agg(tmptipodescripcionsolicitud))
FROM
(
SELECT tds.id_tipo_solicitud,
tds.tipo_solicitud,
tds.activo
FROM sistema.tipo_solicitud tds
WHERE tds.activo=true AND tds.id_tipo_solicitud = stds.id_tipo_solicitud
) AS tmptipodescripcionsolicitud
) AS tipo_solicitud
),
stds.activo
FROM sistema.sub_tipo_solicitud stds
WHERE stds.activo=true and stds.id_sub_tipo_solicitud = s.id_sub_tipo_solicitud
and stds.id_tipo_solicitud=s.id_tipo_solicitud
) AS tmpsubtipodescripcionsolicitud
) AS sub_tipo_solicitud
),
os.activo,
sistema.fn_nivel_avance_asignacion(os.id_orden_servicio) as porcentaje,
                               _total_registros as total_registros
from sistema.orden_servicio os
INNER JOIN sistema.solicitud s ON os.id_solicitud=s.id_solicitud
WHERE os.activo=true AND s.activo=true
AND (_numero_orden='0' OR upper(os.numero_orden) like '%'||upper(_numero_orden)||'%')
AND (_fecha_recepcion ='19000101' or TO_CHAR(s.fecha_registro,'YYYYMMDD') = _fecha_recepcion)
AND (_id_tipo_solicitud=0 OR s.id_tipo_solicitud=_id_tipo_solicitud)
AND EXISTS(SELECT 1 FROM sistema.estado_solicitud es where (_id_estado=0 OR es.id_estado=_id_estado) and es.id_solicitud=s.id_solicitud and es.activo=true)
ORDER BY os.id_orden_servicio DESC
     LIMIT _take  OFFSET _skip
) AS DATA
) as Lista_Orden_servicio
)tmpOrdenServicio
);
RETURN _resultado;
END;
$function$
;]]></string>
			<input_param name="_numero_orden" jt="12" type="varchar" />
			<input_param name="_fecha_recepcion" jt="12" type="varchar" />
			<input_param name="_id_tipo_solicitud" jt="4" type="int4" />
			<input_param name="_id_estado" jt="4" type="int4" />
			<input_param name="_skip" jt="4" type="int4" />
			<input_param name="_take" jt="4" type="int4" />
			<result_param name="returnValue" jt="12" type="varchar" />
		</procedure>
		<procedure name="fn_busqueda_tecnico_orden_servicio" id="Procedure_309574c" isSystem="false" params_known="y" >
			<string><![CDATA[CREATE OR REPLACE FUNCTION sistema.fn_busqueda_tecnico_orden_servicio(_id_orden_servicio integer)
 RETURNS character varying
 LANGUAGE plpgsql
AS $function$
declare
_return character varying;
BEGIN

_return:=(
SELECT array_to_json(array_agg(DATA))
FROM
(
select
tecnico.id_tecnico,
tecnico.activo,
tecnico.apellido_materno,
tecnico.apellido_paterno,
tecnico.es_supervisor,
tecnico.especialidad,
tecnico.experiencia_anios_anteriores,
tecnico.fecha_creacion,
tecnico.fecha_eliminacion,
tecnico.fecha_ingreso,
tecnico.fecha_modificacion,
tecnico.nombre,
tecnico.observacion_reten,
tecnico.profesion,
tecnico.reten_contingencia,
tecnico.usuario_creacion,
tecnico.usuario_eliminacion,
tecnico.usuario_modificacion,
(SELECT row_to_json(tmpestado)
FROM
(
SELECT zona.id_zona,
zona.activo,
zona.fecha_creacion,
zona.fecha_eliminacion,
zona.fecha_modificacion,
zona.usuario_creacion,
zona.usuario_eliminacion,
zona.usuario_modificacion,
zona.zona
FROM sistema.zona
WHERE zona.activo=true
AND zona.id_zona=tecnico.id_zona
) AS tmpestado) as zona,
tecnico.archivo_foto,
tecnico.codigo_tecnico
from sistema.orden_servicio
inner join sistema.orden_servicio_tecnico on orden_servicio.id_orden_Servicio=orden_servicio_tecnico.id_orden_servicio
inner join sistema.tecnico on orden_servicio_tecnico.id_tecnico=tecnico.id_tecnico and tecnico.activo=true
where orden_Servicio.id_orden_servicio=_id_orden_servicio and orden_servicio_tecnico.activo=true
order by tecnico.id_tecnico
) AS DATA
);
RETURN _return;
END;
$function$
;]]></string>
			<input_param name="_id_orden_servicio" jt="4" type="int4" />
			<result_param name="returnValue" jt="12" type="varchar" />
		</procedure>
		<procedure name="fn_capa_dijkstra" id="Procedure_2630e73" isSystem="false" params_known="y" >
			<string><![CDATA[CREATE OR REPLACE FUNCTION sistema.fn_capa_dijkstra(v_graph_sql text, i_source bigint, i_target bigint)
 RETURNS TABLE(id bigint, vertex bigint, previous_vertex bigint, cost double precision)
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO 'pggraph', 'pg_temp'
AS $function$
DECLARE
  r_vertex RECORD;
  d_infinity DOUBLE PRECISION := 9999999999;
  i_current_vertex BIGINT;
  i_neighbour_vertex BIGINT;
  i_current_vertex_cost DOUBLE PRECISION;
BEGIN
  CREATE TEMP TABLE IF NOT EXISTS dijkstra_graph (
    id BIGINT
  , source BIGINT
  , target BIGINT
  , cost DOUBLE PRECISION
  ) ON COMMIT DROP;
  CREATE TEMP TABLE IF NOT EXISTS dijkstra_result (
    id BIGINT
  , vertex BIGINT
  , previous_vertex BIGINT
  , cost DOUBLE PRECISION
  , is_visited BOOLEAN
  ) ON COMMIT DROP;
  DELETE FROM dijkstra_graph;
  DELETE FROM dijkstra_result;
  EXECUTE 'INSERT INTO dijkstra_graph (id, source, target, cost) ' || v_graph_sql;
  INSERT INTO dijkstra_result (id, vertex, previous_vertex, cost, is_visited)
  SELECT NULL::BIGINT, dg.source, NULL::BIGINT, d_infinity, FALSE FROM dijkstra_graph dg
  UNION
  SELECT NULL::BIGINT, dg.target, NULL::BIGINT, d_infinity, FALSE FROM dijkstra_graph dg;
  UPDATE dijkstra_result dr SET cost = 0 WHERE dr.vertex = i_source;
  LOOP
	i_current_vertex := NULL;
  	SELECT dr.vertex, dr.cost
  	INTO i_current_vertex, i_current_vertex_cost
  	FROM dijkstra_result dr
  	WHERE dr.is_visited = FALSE AND dr.cost < d_infinity
  	ORDER BY cost ASC
  	LIMIT 1;
  	EXIT WHEN i_current_vertex IS NULL OR (i_target IS NOT NULL AND i_current_vertex = i_target);
  	UPDATE dijkstra_result dr SET is_visited = TRUE WHERE dr.vertex = i_current_vertex;
	UPDATE dijkstra_result dr
	SET id = dg.id
	  , previous_vertex = i_current_vertex
	  , cost = i_current_vertex_cost + dg.cost
	FROM dijkstra_graph dg
	WHERE dr.vertex = dg.target
	  AND dr.is_visited = FALSE
	  AND dg.source = i_current_vertex
	  AND (i_current_vertex_cost + dg.cost) < dr.cost;
  END LOOP;
  IF i_target IS NULL THEN
  	RETURN QUERY SELECT dr.id, dr.vertex, dr.previous_vertex, dr.cost FROM dijkstra_result dr;
  ELSE
  	RETURN QUERY WITH RECURSIVE backtrack_dijkstra_result(id, vertex, previous_vertex, cost) AS (
  		SELECT dr.id, dr.vertex, dr.previous_vertex, dr.cost
  		FROM dijkstra_result dr
  		WHERE dr.vertex = i_target
  		
  		UNION ALL
  		
  		SELECT dr.id, dr.vertex, dr.previous_vertex, dr.cost
  		FROM dijkstra_result dr, backtrack_dijkstra_result bdr
  		WHERE dr.vertex = bdr.previous_vertex
  	) SELECT bdr.id, bdr.vertex, bdr.previous_vertex, bdr.cost
  	FROM backtrack_dijkstra_result bdr;
  END IF;
END
$function$
;]]></string>
			<input_param name="v_graph_sql" jt="12" type="text" />
			<input_param name="i_source" jt="-5" type="int8" />
			<input_param name="i_target" jt="-5" type="int8" />
			<result_param name="id" jt="-5" type="int8" />
			<result_param name="vertex" jt="-5" type="int8" />
			<result_param name="previous_vertex" jt="-5" type="int8" />
			<result_param name="cost" jt="8" type="float8" />
		</procedure>
		<procedure name="fn_capacitaciones_tecnico" id="Procedure_15c1391" isSystem="false" params_known="y" >
			<string><![CDATA[CREATE OR REPLACE FUNCTION sistema.fn_capacitaciones_tecnico(_id_tecnico integer)
 RETURNS character varying
 LANGUAGE plpgsql
AS $function$
declare _resolucion character varying;
declare rec RECORD;
BEGIN
 _resolucion:='';
FOR rec IN SELECT curso_capacitacion
          FROM sistema.capacitacion_tecnico
          WHERE id_tecnico=_id_tecnico and activo=true 
          ORDER BY curso_capacitacion
    LOOP
	_resolucion = _resolucion || cast('/' as character varying) || cast(rec.curso_capacitacion as character varying);
   END LOOP;
   RETURN substr(_resolucion,2,length(_resolucion));
END;
$function$
;]]></string>
			<input_param name="_id_tecnico" jt="4" type="int4" />
			<result_param name="returnValue" jt="12" type="varchar" />
		</procedure>
		<procedure name="fn_listar_orden_servicio" id="Procedure_352d87f" isSystem="false" params_known="y" >
			<string><![CDATA[CREATE OR REPLACE FUNCTION sistema.fn_listar_orden_servicio(_id_orden_servicio integer, _fecha_recepcion character varying, _id_tipo_solicitud integer, _id_estado integer, _skip integer, _take integer)
 RETURNS character varying
 LANGUAGE plpgsql
AS $function$
DECLARE _resultado character varying;
DECLARE _total_registros integer;
BEGIN
	SELECT count(1) INTO _total_registros
	FROM sistema.orden_servicio os
	INNER JOIN sistema.solicitud s ON os.id_solicitud=s.id_solicitud
	WHERE os.activo=true AND s.activo=true
	AND (_id_orden_servicio=0 OR os.id_orden_servicio=_id_orden_servicio)
	AND (_fecha_recepcion ='19000101' OR TO_CHAR(s.fecha_registro,'YYYYMMDD') = _fecha_recepcion)
	AND (_id_tipo_solicitud=0 OR s.id_tipo_solicitud=_id_tipo_solicitud)
	AND EXISTS(SELECT 1 FROM sistema.estado_solicitud es WHERE (_id_estado=0 OR es.id_estado=_id_estado) AND es.id_solicitud=s.id_solicitud AND es.activo=true);

	_resultado:=(
		SELECT row_to_json(tmpOrdenServicio)
		FROM
		(
			SELECT (
				SELECT array_to_json(array_agg(DATA))
				FROM(
					SELECT
						CAST(ROW_NUMBER () OVER (ORDER BY os.id_orden_servicio desc) as integer) nro
						,os.id_orden_servicio
						,os.numero_orden
						,(
							select row_to_json(tmpsolicitud) from 
							(
								SELECT sol.id_solicitud
									,sol.numero_solicitud
									,(
										select row_to_json(tmpcliente) from 
										(
											SELECT cli.id_cliente
												,(
													select row_to_json(tmptipocliente) from 
													(
														SELECT tcli.id_tipo_cliente
															,tcli.tipo_cliente
															,tcli.activo
														FROM sistema.tipo_cliente tcli
														WHERE tcli.activo=true 
														AND tcli.id_tipo_cliente =cli.id_tipo_cliente
													) AS tmptipocliente
												) as tipo_cliente
												,cli.cliente
												,cli.representante
												,cli.direccion
												,cli.ubicacion
												,cli.activo
											FROM sistema.cliente cli
											WHERE cli.activo=true AND cli.id_cliente =sol.id_cliente
										) AS tmpcliente
									) AS cliente
									,sol.descripcion
									,sol.direccion
									,sol.fecha_hora_inicio
									,sol.fecha_hora_fin
									,sol.fecha_registro
									,sol.activo
								FROM sistema.solicitud sol
								WHERE sol.activo=true AND sol.id_solicitud =os.id_solicitud
							) AS tmpsolicitud
						) AS solicitud
						,(
							select row_to_json(tmpestado) from 
							(
								SELECT est.id_estado
									,est.estado
								FROM sistema.estado est
								INNER JOIN sistema.estado_solicitud estsol ON est.id_estado=estsol.id_estado
								WHERE est.activo=true AND estsol.activo=true
								AND estsol.id_solicitud=s.id_solicitud
								AND (_id_estado=0 OR estsol.id_estado=_id_estado)
							) AS tmpestado
						) AS estado_solicitud
						,(
							select row_to_json(tmpestadoorden) from 
							(
								SELECT est.id_estado
									,est.estado
								FROM sistema.estado est
								INNER JOIN sistema.estado_orden estord ON est.id_estado=estord.id_estado
								WHERE est.activo=true AND estord.activo=true
								AND estord.id_orden_servicio=os.id_orden_servicio
								AND (_id_estado=0 OR estord.id_estado=_id_estado)
							) AS tmpestadoorden
						) AS estado_orden
						,(
							select row_to_json(tmpzona) from 
							(
								SELECT z.id_zona
									,z.zona
									,z.activo
								FROM sistema.zona z
								WHERE z.activo=true AND z.id_zona = s.id_zona
							) AS tmpzona
						) AS zona
						,(
							select row_to_json(tmptiposolicitud) from 
							(
								SELECT tsol.id_tipo_prioridad
									,tsol.tipo_prioridad
									,tsol.activo
								FROM sistema.tipo_prioridad tsol
								WHERE tsol.activo=true AND tsol.id_tipo_prioridad = s.id_tipo_prioridad
							) AS tmptiposolicitud
						) AS tipo_prioridad
						,(
							select row_to_json(tmpcomplejidadservicio) from 
							(
								SELECT com.id_complejidad_servicio
									,com.complejidad_servicio
									,com.activo
								FROM sistema.complejidad_servicio com
								WHERE com.activo=true AND com.id_complejidad_servicio = s.id_complejidad_servicio
							) AS tmpcomplejidadservicio
						) AS complejidad_servicio
						,(
							select row_to_json(tmpsubtiposolicitud) from 
							(
								SELECT stds.id_sub_tipo_solicitud
									,stds.sub_tipo_solicitud
									,(
										select row_to_json(tmptiposolicitud) from 
										(
											SELECT tds.id_tipo_solicitud
												,tds.tipo_solicitud
												,tds.activo
											FROM sistema.tipo_solicitud tds
											WHERE tds.activo=true 
											AND tds.id_tipo_solicitud = stds.id_tipo_solicitud
											AND tds.id_tipo_solicitud = s.id_tipo_solicitud
										) AS tmptiposolicitud
									) AS tipo_solicitud
									,stds.activo
								FROM sistema.sub_tipo_solicitud stds
								WHERE stds.activo=true 
								AND stds.id_sub_tipo_solicitud = s.id_sub_tipo_solicitud
								AND stds.id_tipo_solicitud=s.id_tipo_solicitud
							) AS tmpsubtiposolicitud
						) AS sub_tipo_solicitud
						,os.activo
						,coalesce((case when to_number(coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'000.00'),'999D99')=to_number('100.00','999D99') then '100' else sistema.fn_nivel_avance_asignacion(os.id_orden_servicio) end) ,'0') as porcentaje
						,(case when to_number(coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'000.00'),'999D99')=to_number('100.00','999D99') then 2 when to_number(coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'000.00'),'999D99')<to_number('100.00','999D99') then  1 else 0 end) as reasigna
						,(case when to_number(coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'000.00'),'999D99')=to_number('100.00','999D99') then 'completo' when to_number('50.00','999D99')<to_number(coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'000.00'),'999D99') and to_number(coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'000.00'),'999D99')<to_number('100.00','999D99') then  'porCompletar'
						when to_number('000.00','999D99')<to_number(coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'000.00'),'999D99') and to_number(coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'000.00'),'999D99')<to_number('051.00','999D99') then  'iniciado' else 'sinAsignar' end) as porcentaje_estado
						,_total_registros as total_registros
					from sistema.orden_servicio os
					INNER JOIN sistema.solicitud s ON os.id_solicitud=s.id_solicitud
					WHERE os.activo=true AND s.activo=true
					AND (_id_orden_servicio=0 OR os.id_orden_servicio=_id_orden_servicio)
					AND (_fecha_recepcion ='19000101' or TO_CHAR(s.fecha_registro,'YYYYMMDD') = _fecha_recepcion)
					AND (_id_tipo_solicitud=0 OR s.id_tipo_solicitud=_id_tipo_solicitud)
					AND EXISTS(SELECT 1 FROM sistema.estado_solicitud es where (_id_estado=0 OR es.id_estado=_id_estado) and es.id_solicitud=s.id_solicitud and es.activo=true)
					ORDER BY os.id_orden_servicio DESC
						 LIMIT _take  OFFSET _skip
				) AS DATA
			) as Lista_Orden_servicio
		)tmpOrdenServicio
	);
	RETURN _resultado;
END;
$function$
;]]></string>
			<input_param name="_id_orden_servicio" jt="4" type="int4" />
			<input_param name="_fecha_recepcion" jt="12" type="varchar" />
			<input_param name="_id_tipo_solicitud" jt="4" type="int4" />
			<input_param name="_id_estado" jt="4" type="int4" />
			<input_param name="_skip" jt="4" type="int4" />
			<input_param name="_take" jt="4" type="int4" />
			<result_param name="returnValue" jt="12" type="varchar" />
		</procedure>
		<procedure name="fn_listar_programa_visita" id="Procedure_2ba7433" isSystem="false" params_known="y" >
			<string><![CDATA[CREATE OR REPLACE FUNCTION sistema.fn_listar_programa_visita(_id_tecnico integer, _fecha character varying, _skip integer, _take integer)
 RETURNS character varying
 LANGUAGE plpgsql
AS $function$
DECLARE _resultado character varying;
DECLARE _total_registros integer;
BEGIN
	SELECT count(1) INTO _total_registros
	FROM sistema.programa_visita os
	INNER JOIN sistema.solicitud s ON os.id_solicitud=s.id_solicitud
	WHERE os.activo=true AND s.activo=true
	AND (_id_orden_servicio=0 OR os.id_orden_servicio=_id_orden_servicio)
	AND (_fecha ='19000101' OR TO_CHAR(s.fecha_visita,'YYYYMMDD') = _fecha)
	AND (_id_tipo_solicitud=0 OR s.id_tipo_solicitud=_id_tipo_solicitud)
	AND EXISTS(SELECT 1 FROM sistema.estado_solicitud es WHERE (_id_estado=0 OR es.id_estado=_id_estado) AND es.id_solicitud=s.id_solicitud AND es.activo=true);

	_resultado:=(
		SELECT row_to_json(tmpOrdenServicio)
		FROM
		(
			SELECT (
				SELECT array_to_json(array_agg(DATA))
				FROM(
					SELECT
						CAST(ROW_NUMBER () OVER (ORDER BY os.id_orden_servicio desc) as integer) nro
						,os.id_orden_servicio
						,os.numero_orden
						,(
							select row_to_json(tmpsolicitud) from 
							(
								SELECT sol.id_solicitud
									,sol.numero_solicitud
									,(
										select row_to_json(tmpcliente) from 
										(
											SELECT cli.id_cliente
												,(
													select row_to_json(tmptipocliente) from 
													(
														SELECT tcli.id_tipo_cliente
															,tcli.tipo_cliente
															,tcli.activo
														FROM sistema.tipo_cliente tcli
														WHERE tcli.activo=true 
														AND tcli.id_tipo_cliente =cli.id_tipo_cliente
													) AS tmptipocliente
												) as tipo_cliente
												,cli.cliente
												,cli.representante
												,cli.direccion
												,cli.ubicacion
												,cli.activo
											FROM sistema.cliente cli
											WHERE cli.activo=true AND cli.id_cliente =sol.id_cliente
										) AS tmpcliente
									) AS cliente
									,sol.descripcion
									,sol.direccion
									,sol.fecha_hora_inicio
									,sol.fecha_hora_fin
									,sol.fecha_registro
									,sol.activo
								FROM sistema.solicitud sol
								WHERE sol.activo=true AND sol.id_solicitud =os.id_solicitud
							) AS tmpsolicitud
						) AS solicitud
						,(
							select row_to_json(tmpestado) from 
							(
								SELECT est.id_estado
									,est.estado
								FROM sistema.estado est
								INNER JOIN sistema.estado_solicitud estsol ON est.id_estado=estsol.id_estado
								WHERE est.activo=true AND estsol.activo=true
								AND estsol.id_solicitud=s.id_solicitud
								AND (_id_estado=0 OR estsol.id_estado=_id_estado)
							) AS tmpestado
						) AS estado_solicitud
						,(
							select row_to_json(tmpestadoorden) from 
							(
								SELECT est.id_estado
									,est.estado
								FROM sistema.estado est
								INNER JOIN sistema.estado_orden estord ON est.id_estado=estord.id_estado
								WHERE est.activo=true AND estord.activo=true
								AND estord.id_orden_servicio=os.id_orden_servicio
								AND (_id_estado=0 OR estord.id_estado=_id_estado)
							) AS tmpestadoorden
						) AS estado_orden
						,(
							select row_to_json(tmpzona) from 
							(
								SELECT z.id_zona
									,z.zona
									,z.activo
								FROM sistema.zona z
								WHERE z.activo=true AND z.id_zona = s.id_zona
							) AS tmpzona
						) AS zona
						,(
							select row_to_json(tmptiposolicitud) from 
							(
								SELECT tsol.id_tipo_prioridad
									,tsol.tipo_prioridad
									,tsol.activo
								FROM sistema.tipo_prioridad tsol
								WHERE tsol.activo=true AND tsol.id_tipo_prioridad = s.id_tipo_prioridad
							) AS tmptiposolicitud
						) AS tipo_prioridad
						,(
							select row_to_json(tmpcomplejidadservicio) from 
							(
								SELECT com.id_complejidad_servicio
									,com.complejidad_servicio
									,com.activo
								FROM sistema.complejidad_servicio com
								WHERE com.activo=true AND com.id_complejidad_servicio = s.id_complejidad_servicio
							) AS tmpcomplejidadservicio
						) AS complejidad_servicio
						,(
							select row_to_json(tmpsubtiposolicitud) from 
							(
								SELECT stds.id_sub_tipo_solicitud
									,stds.sub_tipo_solicitud
									,(
										select row_to_json(tmptiposolicitud) from 
										(
											SELECT tds.id_tipo_solicitud
												,tds.tipo_solicitud
												,tds.activo
											FROM sistema.tipo_solicitud tds
											WHERE tds.activo=true 
											AND tds.id_tipo_solicitud = stds.id_tipo_solicitud
											AND tds.id_tipo_solicitud = s.id_tipo_solicitud
										) AS tmptiposolicitud
									) AS tipo_solicitud
									,stds.activo
								FROM sistema.sub_tipo_solicitud stds
								WHERE stds.activo=true 
								AND stds.id_sub_tipo_solicitud = s.id_sub_tipo_solicitud
								AND stds.id_tipo_solicitud=s.id_tipo_solicitud
							) AS tmpsubtiposolicitud
						) AS sub_tipo_solicitud
						,os.activo
						,coalesce((case when to_number(coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'000.00'),'999D99')=to_number('100.00','999D99') then '100' else sistema.fn_nivel_avance_asignacion(os.id_orden_servicio) end) ,'0') as porcentaje
						,(case when to_number(coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'000.00'),'999D99')=to_number('100.00','999D99') then 2 when to_number(coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'000.00'),'999D99')<to_number('100.00','999D99') then  1 else 0 end) as reasigna
						,(case when to_number(coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'000.00'),'999D99')=to_number('100.00','999D99') then 'completo' when to_number('50.00','999D99')<to_number(coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'000.00'),'999D99') and to_number(coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'000.00'),'999D99')<to_number('100.00','999D99') then  'porCompletar'
						when to_number('000.00','999D99')<to_number(coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'000.00'),'999D99') and to_number(coalesce(sistema.fn_nivel_avance_asignacion(os.id_orden_servicio),'000.00'),'999D99')<to_number('051.00','999D99') then  'iniciado' else 'sinAsignar' end) as porcentaje_estado
						,_total_registros as total_registros
					from sistema.orden_servicio os
					INNER JOIN sistema.solicitud s ON os.id_solicitud=s.id_solicitud
					WHERE os.activo=true AND s.activo=true
					AND (_id_orden_servicio=0 OR os.id_orden_servicio=_id_orden_servicio)
					AND (_fecha ='19000101' or TO_CHAR(s.fecha_registro,'YYYYMMDD') = _fecha)
					AND (_id_tipo_solicitud=0 OR s.id_tipo_solicitud=_id_tipo_solicitud)
					AND EXISTS(SELECT 1 FROM sistema.estado_solicitud es where (_id_estado=0 OR es.id_estado=_id_estado) and es.id_solicitud=s.id_solicitud and es.activo=true)
					ORDER BY os.id_orden_servicio DESC
						 LIMIT _take  OFFSET _skip
				) AS DATA
			) as Lista_Orden_servicio
		)tmpOrdenServicio
	);
	RETURN _resultado;
END;
$function$
;]]></string>
			<input_param name="_id_tecnico" jt="4" type="int4" />
			<input_param name="_fecha" jt="12" type="varchar" />
			<input_param name="_skip" jt="4" type="int4" />
			<input_param name="_take" jt="4" type="int4" />
			<result_param name="returnValue" jt="12" type="varchar" />
		</procedure>
		<procedure name="fn_nivel_avance_asignacion" id="Procedure_13973ed" isSystem="false" params_known="y" >
			<string><![CDATA[CREATE OR REPLACE FUNCTION sistema.fn_nivel_avance_asignacion(_id_orden_servicio integer)
 RETURNS character varying
 LANGUAGE plpgsql
AS $function$
declare _id_tipo_solicitud integer;
_tipo_solicitud character varying;
_id_tipo_prioridad integer;
_tipo_prioridad character varying;
_id_sub_tipo_solicitud integer;
_sub_tipo_solicitud character varying;
_id_complejidad_servicio integer;
_complejidad_servicio character varying;
_id_zona integer;
_suma numeric(5,2);
_sumaAsig numeric(5,2);
_promedioPor numeric(5,2);
_promedio character varying;
BEGIN
	SELECT solicitud.id_tipo_solicitud
		,tipo_solicitud.tipo_solicitud
		,solicitud.id_tipo_prioridad
		,tipo_prioridad.tipo_prioridad
		,solicitud.id_sub_tipo_solicitud
		,sub_tipo_solicitud.sub_tipo_solicitud
		,solicitud.id_complejidad_servicio
		,complejidad_servicio.complejidad_servicio
		,id_zona
	INTO _id_tipo_solicitud
		,_tipo_solicitud
		,_id_tipo_prioridad
		,_tipo_prioridad
		,_id_sub_tipo_solicitud
		,_sub_tipo_solicitud
		,_id_complejidad_servicio
		,_complejidad_servicio
		,_id_zona
	FROM sistema.orden_servicio 
	INNER JOIN sistema.solicitud ON solicitud.id_solicitud=orden_servicio.id_solicitud
	INNER JOIN sistema.tipo_prioridad ON solicitud.id_tipo_prioridad= tipo_prioridad.id_tipo_prioridad
	INNER JOIN sistema.tipo_solicitud ON solicitud.id_tipo_solicitud= tipo_solicitud.id_tipo_solicitud
	INNER JOIN sistema.sub_tipo_solicitud ON solicitud.id_tipo_solicitud= sub_tipo_solicitud.id_tipo_solicitud AND solicitud.id_sub_tipo_solicitud= sub_tipo_solicitud.id_sub_tipo_solicitud
	INNER JOIN sistema.complejidad_servicio ON complejidad_servicio.id_complejidad_servicio= solicitud.id_complejidad_servicio
	WHERE orden_servicio.id_orden_servicio=_id_orden_servicio;

	SELECT cast(sum(to_number(valores,'999D99')) as numeric(5,2)) INTO _suma
	FROM sistema.parametros_sistema
	WHERE id_tipo_prioridad=_id_tipo_prioridad
	AND id_tipo_solicitud=_id_tipo_solicitud
	AND id_sub_tipo_solicitud=_id_sub_tipo_solicitud
	AND id_complejidad_servicio=_id_complejidad_servicio; --group by valores;
	 
	SELECT cast(count(orden_servicio_tecnico.id_orden_servicio) as numeric(5,2)) INTO _sumaAsig
	FROM sistema.orden_servicio_tecnico  orden_servicio_tecnico
	LEFT JOIN  sistema.tecnico tecnico ON orden_servicio_tecnico.id_tecnico=tecnico.id_tecnico
	WHERE orden_servicio_tecnico.id_orden_servicio=_id_orden_servicio
	AND orden_servicio_tecnico.activo=true
	GROUP BY orden_servicio_tecnico.id_orden_servicio;

	_promedioPor:= (_sumaAsig/_suma)*100;
	_promedio:= to_char(_promedioPor,'999D99') ;
	 
	IF _promedio=' ' THEN
		_promedio:='0';
	END IF;
	
    RETURN _promedio;
   
END;
$function$
;]]></string>
			<input_param name="_id_orden_servicio" jt="4" type="int4" />
			<result_param name="returnValue" jt="12" type="varchar" />
		</procedure>
		<procedure name="fn_nivel_conocimiento" id="Procedure_54f00fb" isSystem="false" params_known="y" >
			<string><![CDATA[CREATE OR REPLACE FUNCTION sistema.fn_nivel_conocimiento(_id_tecnico integer)
 RETURNS character varying
 LANGUAGE plpgsql
AS $function$
declare _promedio character varying;
	_horas integer;
BEGIN 
 
 select sum(cast(horas_capacitacion as integer)) into _horas 
 from  sistema.capacitacion_tecnico 
 where id_tecnico=_id_tecnico 
 and cast(DATE_PART('year', now()) - DATE_PART('year', capacitacion_tecnico.fecha_capacitacion) as integer) <=4;
 
 select 
 (case 
  when (_horas>50) then
      'Alto'
  when (20 <= _horas) and (_horas <= 50 ) then
    'Medio' 
  when (_horas<20)  then
   'Bajo' 
   else
   'Bajo'
end) into _promedio;

   RETURN _promedio;
END;
$function$
;]]></string>
			<input_param name="_id_tecnico" jt="4" type="int4" />
			<result_param name="returnValue" jt="12" type="varchar" />
		</procedure>
		<procedure name="fn_obtener_tecnico_orden_servicio" id="Procedure_124a520" isSystem="false" params_known="y" >
			<string><![CDATA[CREATE OR REPLACE FUNCTION sistema.fn_obtener_tecnico_orden_servicio(_id_orden_servicio integer, _id_tecnico integer)
 RETURNS character varying
 LANGUAGE plpgsql
AS $function$
declare 
	_return character varying;
BEGIN

_return:=(
		SELECT array_to_json(array_agg(DATA)) 
		FROM
		(
			select 
				orden_servicio_tecnico.id_orden_servicio_tecnico,
				orden_servicio_tecnico.id_orden_servicio,
				orden_servicio_tecnico.id_tecnico
	
			from sistema.orden_servicio_tecnico 
			where  orden_servicio_tecnico.activo=true and orden_servicio_tecnico.id_orden_servicio=_id_orden_servicio and orden_servicio_tecnico.id_tecnico=_id_tecnico
		) AS DATA
	);
RETURN _return;
END;
$function$
;]]></string>
			<input_param name="_id_orden_servicio" jt="4" type="int4" />
			<input_param name="_id_tecnico" jt="4" type="int4" />
			<result_param name="returnValue" jt="12" type="varchar" />
		</procedure>
		<procedure name="fn_parametros_sistema_tecnico" id="Procedure_4d049b0" isSystem="false" params_known="y" >
			<string><![CDATA[CREATE OR REPLACE FUNCTION sistema.fn_parametros_sistema_tecnico(_id_solicitud integer)
 RETURNS character varying
 LANGUAGE plpgsql
AS $function$
declare _id_tipo_prioridad integer ;
	_id_tipo_solicitud integer;
	_id_sub_tipo_solicitud integer;
	_id_zona integer;
	_id_complejidad_servicio integer;
	_tipo_prioridad character varying ;
	_tipo_solicitud character varying;
	_sub_tipo_solicitud character varying;
	_complejidad_servicio character varying;
	_numero_registros integer;
	_min_calificacion decimal;
	_promedio decimal;
	_resolucion character varying;
	_return character varying;
BEGIN
  _resolucion:='';
 
SELECT solicitud.id_tipo_solicitud
	,tipo_solicitud.tipo_solicitud
	,solicitud.id_tipo_prioridad
	,tipo_prioridad.tipo_prioridad
	,solicitud.id_sub_tipo_solicitud
	,sub_tipo_solicitud.sub_tipo_solicitud
	,solicitud.id_complejidad_servicio
	,complejidad_servicio.complejidad_servicio
	,id_zona
	INTO _id_tipo_solicitud
	,_tipo_solicitud
	,_id_tipo_prioridad
	,_tipo_prioridad
	,_id_sub_tipo_solicitud
	,_sub_tipo_solicitud
	,_id_complejidad_servicio
	,_complejidad_servicio
	,_id_zona
  FROM sistema.solicitud 
  inner join sistema.tipo_prioridad on solicitud.id_tipo_prioridad= tipo_prioridad.id_tipo_prioridad
  inner join sistema.tipo_solicitud on solicitud.id_tipo_solicitud= tipo_solicitud.id_tipo_solicitud
  inner join sistema.sub_tipo_solicitud on solicitud.id_tipo_solicitud= sub_tipo_solicitud.id_tipo_solicitud and solicitud.id_sub_tipo_solicitud= sub_tipo_solicitud.id_sub_tipo_solicitud
  inner join sistema.complejidad_servicio on complejidad_servicio.id_complejidad_servicio= solicitud.id_complejidad_servicio
  where  solicitud.id_solicitud=_id_solicitud;

_return:=(
		SELECT array_to_json(array_agg(DATA)) 
		FROM
		(
			select 
			  valores ,
			  cantidad ,
			  especialidad
			from sistema.parametros_sistema 
			where parametros_sistema.activo=true 
			and parametros_sistema.id_tipo_prioridad=_id_tipo_prioridad
			and parametros_sistema.id_tipo_solicitud=_id_tipo_solicitud
			and parametros_sistema.id_sub_tipo_solicitud=_id_sub_tipo_solicitud
			and parametros_sistema.id_complejidad_servicio=_id_complejidad_servicio
			
		) AS DATA
	);
RETURN _return;



END;
$function$
;]]></string>
			<input_param name="_id_solicitud" jt="4" type="int4" />
			<result_param name="returnValue" jt="12" type="varchar" />
		</procedure>
		<procedure name="fn_promedio_busqueda_euristica" id="Procedure_55b643b" isSystem="false" params_known="y" >
			<string><![CDATA[CREATE OR REPLACE FUNCTION sistema.fn_promedio_busqueda_euristica(_exp_anios integer, _nivel_conocimiento character varying, _cal_encuesta double precision, _cal_informe_supervisor double precision)
 RETURNS numeric
 LANGUAGE plpgsql
AS $function$
declare _promedio decimal;
BEGIN
 _promedio:=0.00;
 select 
 case 
  when (_exp_anios>10) then
    case _nivel_conocimiento
      when 'Alto' then
        (((2*_cal_encuesta + _cal_informe_supervisor)/4)+ 4.5)/2 
      when 'Medio' then
        (((2*_cal_encuesta + _cal_informe_supervisor)/4)+ 4.25)/2
      when 'Bajo' then
        (((2*_cal_encuesta + _cal_informe_supervisor)/4)+ 4.0)/2
      else (((2*_cal_encuesta + _cal_informe_supervisor)/4)+ 4.5)/2
    end
  when (5 <= _exp_anios) and (_exp_anios <= 10 ) then
    case _nivel_conocimiento
      when 'Alto' then
        (((2*_cal_encuesta + _cal_informe_supervisor)/4)+ 4.0)/2
      when 'Medio' then
        (((2*_cal_encuesta + _cal_informe_supervisor)/4)+ 3.75)/2
      when 'Bajo' then
        (((2*_cal_encuesta + _cal_informe_supervisor)/4)+ 3.5)/2
      else (((2*_cal_encuesta + _cal_informe_supervisor)/4)+ 4.0)/2
    end
  when (_exp_anios<5)  then
    case _nivel_conocimiento
      when 'Alto' then
        (((2*_cal_encuesta + _cal_informe_supervisor)/4)+ 3.5)/2
      when 'Medio' then
        (((2*_cal_encuesta + _cal_informe_supervisor)/4)+ 3.25)/2
      when 'Bajo' then
        (((2*_cal_encuesta + _cal_informe_supervisor)/4)+ 3.0)/2
      else (((2*_cal_encuesta + _cal_informe_supervisor)/4)+ 3.5)/2
    end
  else (((4*_cal_encuesta + _cal_informe_supervisor)/4)+ 3.5)/2
end into _promedio;

   RETURN cast(_promedio as numeric(5,2));
END;
$function$
;]]></string>
			<input_param name="_exp_anios" jt="4" type="int4" />
			<input_param name="_nivel_conocimiento" jt="12" type="varchar" />
			<input_param name="_cal_encuesta" jt="8" type="float8" />
			<input_param name="_cal_informe_supervisor" jt="8" type="float8" />
			<result_param name="returnValue" jt="2" type="numeric" />
		</procedure>
	</schema>
	<connector name="PostgreSQL" database="PostgreSQL" driver_class="org.postgresql.Driver" driver_jar="postgresql-42.2.5.jar" driver_desc="Standard" host="localhost" port="5432" instance="SIGMA_DB" user="developer" passwd="ZGV2ZQ==" />
	<layout name="Default Layout" id="Layout_4e2b2ce" show_relation="columns" >
		<entity schema="sistema" name="calificacion" color="C7F4BE" x="1872" y="496" />
		<entity schema="sistema" name="capacitacion_tecnico" color="C7F4BE" x="1872" y="192" />
		<entity schema="sistema" name="cliente" color="F4DDBE" x="304" y="512" />
		<entity schema="sistema" name="complejidad_servicio" color="F4DDBE" x="48" y="512" />
		<entity schema="sistema" name="encuesta_atencion_servicio" color="BEBEF4" x="1584" y="416" />
		<entity schema="sistema" name="estado" color="D1BEF4" x="1872" y="1168" />
		<entity schema="sistema" name="estado_orden" color="D1BEF4" x="2128" y="1504" />
		<entity schema="sistema" name="estado_programa_visita" color="D1BEF4" x="2128" y="1168" />
		<entity schema="sistema" name="estado_solicitud" color="D1BEF4" x="1872" y="1504" />
		<entity schema="sistema" name="grafico" color="BED3F4" x="816" y="1168" />
		<entity schema="sistema" name="graph" color="BED3F4" x="1040" y="1168" />
		<entity schema="sistema" name="hoja_ruta" color="BEBEF4" x="816" y="720" />
		<entity schema="sistema" name="informe" color="BEBEF4" x="1328" y="752" />
		<entity schema="sistema" name="orden_servicio" color="BEBEF4" x="1072" y="416" />
		<entity schema="sistema" name="orden_servicio_recurso" color="C7F4BE" x="2352" y="496" />
		<entity schema="sistema" name="orden_servicio_tecnico" color="C7F4BE" x="2096" y="496" />
		<entity schema="sistema" name="parametros_mapa" color="BED3F4" x="1040" y="1520" />
		<entity schema="sistema" name="parametros_sistema" color="BED3F4" x="1264" y="1520" />
		<entity schema="sistema" name="programa_visita" color="BEBEF4" x="1072" y="720" />
		<entity schema="sistema" name="programacion" color="BEBEF4" x="1072" y="48" />
		<entity schema="sistema" name="recurso" color="C7F4BE" x="2592" y="496" />
		<entity schema="sistema" name="solicitud" color="F4DDBE" x="304" y="48" />
		<entity schema="sistema" name="sub_tipo_solicitud" color="F4DDBE" x="560" y="48" />
		<entity schema="sistema" name="tecnico" color="C7F4BE" x="2096" y="48" />
		<entity schema="sistema" name="tipo_cliente" color="F4DDBE" x="560" y="912" />
		<entity schema="sistema" name="tipo_prioridad" color="F4DDBE" x="48" y="224" />
		<entity schema="sistema" name="visita" color="BEBEF4" x="1328" y="416" />
		<entity schema="sistema" name="zona" color="C7F4BE" x="2352" y="48" />
		<entity schema="sistema" name="tipo_solicitud" color="F4DDBE" x="560" y="512" />
	</layout>
	<layout name="Sample Layout with Tools" id="Layout_29a4b3b" show_column_type="y" show_relation="columns" >
		<entity schema="sistema" name="calificacion" color="C7F4BE" x="2144" y="624" />
		<entity schema="sistema" name="capacitacion_tecnico" color="C7F4BE" x="2128" y="320" />
		<entity schema="sistema" name="cliente" color="F4DDBE" x="352" y="640" />
		<entity schema="sistema" name="complejidad_servicio" color="F4DDBE" x="48" y="640" />
		<entity schema="sistema" name="encuesta_atencion_servicio" color="BEBEF4" x="1808" y="544" />
		<entity schema="sistema" name="estado" color="D1BEF4" x="2128" y="1296" />
		<entity schema="sistema" name="estado_orden" color="D1BEF4" x="2416" y="1632" />
		<entity schema="sistema" name="estado_programa_visita" color="D1BEF4" x="2416" y="1296" />
		<entity schema="sistema" name="estado_solicitud" color="D1BEF4" x="2128" y="1632" />
		<entity schema="sistema" name="grafico" color="BED3F4" x="944" y="1296" />
		<entity schema="sistema" name="graph" color="BED3F4" x="1200" y="1296" />
		<entity schema="sistema" name="hoja_ruta" color="BEBEF4" x="944" y="848" />
		<entity schema="sistema" name="informe" color="BEBEF4" x="1520" y="880" />
		<entity schema="sistema" name="orden_servicio" color="BEBEF4" x="1232" y="544" />
		<entity schema="sistema" name="orden_servicio_recurso" color="C7F4BE" x="2688" y="624" />
		<entity schema="sistema" name="orden_servicio_tecnico" color="C7F4BE" x="2400" y="624" />
		<entity schema="sistema" name="parametros_mapa" color="BED3F4" x="1200" y="1648" />
		<entity schema="sistema" name="parametros_sistema" color="BED3F4" x="1472" y="1648" />
		<entity schema="sistema" name="programa_visita" color="BEBEF4" x="1232" y="848" />
		<entity schema="sistema" name="programacion" color="BEBEF4" x="1232" y="176" />
		<entity schema="sistema" name="recurso" color="C7F4BE" x="2960" y="624" />
		<entity schema="sistema" name="solicitud" color="F4DDBE" x="352" y="176" />
		<entity schema="sistema" name="sub_tipo_solicitud" color="F4DDBE" x="656" y="176" />
		<entity schema="sistema" name="tecnico" color="C7F4BE" x="2400" y="176" />
		<entity schema="sistema" name="tipo_cliente" color="F4DDBE" x="640" y="1040" />
		<entity schema="sistema" name="tipo_prioridad" color="F4DDBE" x="64" y="352" />
		<entity schema="sistema" name="tipo_solicitud" color="F4DDBE" x="656" y="640" />
		<entity schema="sistema" name="visita" color="BEBEF4" x="1520" y="544" />
		<entity schema="sistema" name="zona" color="C7F4BE" x="2688" y="176" />
		<callout x="352" y="80" pointer="Round" >
			<comment><![CDATA[This is a sample layout with tools: relational data browse, query builder and SQL editor. 
For better understanding the schema create multiple layouts with the same or different tables. 
Layouts are saved together with the schema to project file. 
Double-click any table, column or foreign key to edit.]]></comment>
		</callout>
		<group name="grafico" color="ECF0F7" >
			<entity schema="sistema" name="grafico" />
			<entity schema="sistema" name="graph" />
			<entity schema="sistema" name="parametros_mapa" />
			<entity schema="sistema" name="parametros_sistema" />
		</group>
		<group name="estado" color="F0ECF7" >
			<entity schema="sistema" name="estado" />
			<entity schema="sistema" name="estado_programa_visita" />
			<entity schema="sistema" name="estado_orden" />
			<entity schema="sistema" name="estado_solicitud" />
		</group>
		<group name="tecnico" color="EEF7EC" >
			<entity schema="sistema" name="tecnico" />
			<entity schema="sistema" name="zona" />
			<entity schema="sistema" name="orden_servicio_recurso" />
			<entity schema="sistema" name="orden_servicio_tecnico" />
			<entity schema="sistema" name="calificacion" />
			<entity schema="sistema" name="capacitacion_tecnico" />
			<entity schema="sistema" name="recurso" />
		</group>
		<group name="orden_servicio" color="ECECF7" >
			<entity schema="sistema" name="orden_servicio" />
			<entity schema="sistema" name="visita" />
			<entity schema="sistema" name="programa_visita" />
			<entity schema="sistema" name="hoja_ruta" />
			<entity schema="sistema" name="encuesta_atencion_servicio" />
			<entity schema="sistema" name="informe" />
			<entity schema="sistema" name="programacion" />
		</group>
		<group name="solicitud" color="F7F2EC" >
			<entity schema="sistema" name="solicitud" />
			<entity schema="sistema" name="sub_tipo_solicitud" />
			<entity schema="sistema" name="tipo_solicitud" />
			<entity schema="sistema" name="cliente" />
			<entity schema="sistema" name="complejidad_servicio" />
			<entity schema="sistema" name="tipo_prioridad" />
			<entity schema="sistema" name="tipo_cliente" />
		</group>
		<script name="Sample SQL Editor" id="Editor_1c13cb7" language="SQL" >
			<string><![CDATA[SELECT * 
FROM
	sistema.solicitud d;]]></string>
		</script>
		<browser id="Browse_367b6c" name="Sample Relational Data Browse" confirm_updates="y" >
			<browse_table schema="sistema" entity="solicitud" x="20" y="20" width="400" height="300" >
				<browse_table schema="sistema" entity="estado_solicitud" fk="fkclncpd0pd2fnf0p3jf6saawet" x="440" y="20" width="500" height="350" >
					<browse_table schema="sistema" entity="estado" fk="fk9lhc9mhw6bxwu2pd4r29f5b3o" x="960" y="20" width="500" height="350" record_view="y" />
				</browse_table>
			</browse_table>
		</browser>
		<query id="Query_133ffc" name="Sample Query Builder" >
			<query_table schema="sistema" name="solicitud" alias="s" x="48" y="48" >
				<column name="id_solicitud" />
				<column name="activo" />
				<column name="descripcion" />
				<column name="direccion" />
				<column name="fecha_creacion" />
				<column name="fecha_eliminacion" />
				<column name="fecha_hora_fin" />
				<column name="fecha_hora_inicio" />
				<column name="fecha_modificacion" />
				<column name="fecha_registro" />
				<column name="numero_solicitud" />
				<column name="usuario_creacion" />
				<column name="usuario_eliminacion" />
				<column name="usuario_modificacion" />
				<column name="id_cliente" />
				<column name="id_complejidad_servicio" />
				<column name="id_sub_tipo_solicitud" />
				<column name="id_tipo_prioridad" />
				<column name="id_tipo_solicitud" />
				<column name="id_zona" />
				<query_table schema="sistema" name="estado_solicitud" alias="es" x="272" y="48" fk="fkclncpd0pd2fnf0p3jf6saawet" type="Inner Join" >
					<column name="id_estado_solicitud" />
					<column name="activo" />
					<column name="estado_solicitud" />
					<column name="fecha_creacion" />
					<column name="fecha_eliminacion" />
					<column name="fecha_modificacion" />
					<column name="usuario_creacion" />
					<column name="usuario_eliminacion" />
					<column name="usuario_modificacion" />
					<column name="id_estado" />
					<column name="id_solicitud" />
					<query_table schema="sistema" name="estado" alias="e" x="512" y="48" fk="fk9lhc9mhw6bxwu2pd4r29f5b3o" type="Inner Join" >
						<column name="id_estado" />
						<column name="activo" />
						<column name="estado" />
						<column name="fecha_creacion" />
						<column name="fecha_eliminacion" />
						<column name="fecha_modificacion" />
						<column name="usuario_creacion" />
						<column name="usuario_eliminacion" />
						<column name="usuario_modificacion" />
						<column name="flag_orden" />
						<column name="flag_solicitud" />
						<column name="flag_visita" />
					</query_table>
				</query_table>
			</query_table>
		</query>
	</layout>
</project>